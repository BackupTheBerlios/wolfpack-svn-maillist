<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [Wolfpack-svn] r6877 - in trunk/server/release: definitions	definitions/defines definitions/items scripts scripts/combat	scripts/commands scripts/deeds scripts/guilds scripts/magic	scripts/skills scripts/speech scripts/system scripts/wolfpack web
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/wolfpack-svn/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:wolfpack-svn%40lists.berlios.de?Subject=Re%3A%20%5BWolfpack-svn%5D%20r6877%20-%20in%20trunk/server/release%3A%20definitions%0A%09definitions/defines%20definitions/items%20scripts%20scripts/combat%0A%09scripts/commands%20scripts/deeds%20scripts/guilds%20scripts/magic%0A%09scripts/skills%20scripts/speech%20scripts/system%20scripts/wolfpack%20web&In-Reply-To=%3C200904051819.n35IJsGY017056%40sheep.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="000081.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[Wolfpack-svn] r6877 - in trunk/server/release: definitions	definitions/defines definitions/items scripts scripts/combat	scripts/commands scripts/deeds scripts/guilds scripts/magic	scripts/skills scripts/speech scripts/system scripts/wolfpack web</H1>
    <B>naddel at mail.berlios.de</B> 
    <A HREF="mailto:wolfpack-svn%40lists.berlios.de?Subject=Re%3A%20%5BWolfpack-svn%5D%20r6877%20-%20in%20trunk/server/release%3A%20definitions%0A%09definitions/defines%20definitions/items%20scripts%20scripts/combat%0A%09scripts/commands%20scripts/deeds%20scripts/guilds%20scripts/magic%0A%09scripts/skills%20scripts/speech%20scripts/system%20scripts/wolfpack%20web&In-Reply-To=%3C200904051819.n35IJsGY017056%40sheep.berlios.de%3E"
       TITLE="[Wolfpack-svn] r6877 - in trunk/server/release: definitions	definitions/defines definitions/items scripts scripts/combat	scripts/commands scripts/deeds scripts/guilds scripts/magic	scripts/skills scripts/speech scripts/system scripts/wolfpack web">naddel at mail.berlios.de
       </A><BR>
    <I>Sun Apr  5 20:19:54 CEST 2009</I>
    <P><UL>
        
        <LI>Next message: <A HREF="000081.html">[Wolfpack-svn] r6878 - trunk/server/docs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80">[ date ]</a>
              <a href="thread.html#80">[ thread ]</a>
              <a href="subject.html#80">[ subject ]</a>
              <a href="author.html#80">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: naddel
Date: 2009-04-05 20:19:39 +0200 (Sun, 05 Apr 2009)
New Revision: 6877

Added:
   trunk/server/release/scripts/commands/find.py
Modified:
   trunk/server/release/definitions/defines/color_defines.xml
   trunk/server/release/definitions/items/core.xml
   trunk/server/release/definitions/scripts.xml
   trunk/server/release/scripts/beverage.py
   trunk/server/release/scripts/check.py
   trunk/server/release/scripts/combat/utilities.py
   trunk/server/release/scripts/commands/add.py
   trunk/server/release/scripts/commands/boom.py
   trunk/server/release/scripts/commands/decoration.py
   trunk/server/release/scripts/commands/edit.py
   trunk/server/release/scripts/commands/eval.py
   trunk/server/release/scripts/commands/events.py
   trunk/server/release/scripts/commands/findlock.py
   trunk/server/release/scripts/commands/go.py
   trunk/server/release/scripts/commands/import.py
   trunk/server/release/scripts/commands/tags.py
   trunk/server/release/scripts/cooking.py
   trunk/server/release/scripts/deeds/carpentry_deed.py
   trunk/server/release/scripts/environment.py
   trunk/server/release/scripts/equipment.py
   trunk/server/release/scripts/farming.py
   trunk/server/release/scripts/furniture.py
   trunk/server/release/scripts/granite.py
   trunk/server/release/scripts/guilds/stone.py
   trunk/server/release/scripts/ingot.py
   trunk/server/release/scripts/lightsource.py
   trunk/server/release/scripts/magic/__init__.py
   trunk/server/release/scripts/magic/vampiricembrace.py
   trunk/server/release/scripts/map.py
   trunk/server/release/scripts/ore.py
   trunk/server/release/scripts/signpost.py
   trunk/server/release/scripts/skills/__init__.py
   trunk/server/release/scripts/skills/blacksmithing.py
   trunk/server/release/scripts/skills/bowcraft.py
   trunk/server/release/scripts/skills/carpentry.py
   trunk/server/release/scripts/skills/cooking.py
   trunk/server/release/scripts/skills/inscription.py
   trunk/server/release/scripts/skills/mining.py
   trunk/server/release/scripts/skills/tailoring.py
   trunk/server/release/scripts/skills/tinkering.py
   trunk/server/release/scripts/speech/monster.py
   trunk/server/release/scripts/speech/stablemaster.py
   trunk/server/release/scripts/system/dbupdate.py
   trunk/server/release/scripts/system/loot.py
   trunk/server/release/scripts/system/makemenus.py
   trunk/server/release/scripts/system/poison.py
   trunk/server/release/scripts/system/skillgain.py
   trunk/server/release/scripts/system/slayer.py
   trunk/server/release/scripts/wolfpack/properties.py
   trunk/server/release/web/accounts.py
Log:
- new find command
- replaced has_key with &quot;&lt;key&gt; in &lt;dict&gt;&quot; because has_key is deprecated in python

Modified: trunk/server/release/definitions/defines/color_defines.xml
===================================================================
--- trunk/server/release/definitions/defines/color_defines.xml	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/definitions/defines/color_defines.xml	2009-04-05 18:19:39 UTC (rev 6877)
@@ -169,7 +169,6 @@
 	&lt;/define&gt;
 
 	&lt;!-- Leathers --&gt;
-
 	&lt;define id=&quot;leather_armor&quot;&gt;
 		&lt;color&gt;0x0&lt;/color&gt;
 		&lt;tag name=&quot;resname&quot; value=&quot;leather&quot; /&gt;
@@ -191,7 +190,6 @@
 	&lt;/define&gt;
 
 	&lt;!-- Dragon Scales --&gt;
-
 	&lt;define id=&quot;red_scaled_armor&quot;&gt;
 		&lt;color&gt;0x66d&lt;/color&gt;
 		&lt;tag name=&quot;resname2&quot; value=&quot;red_scales&quot; /&gt;
@@ -223,7 +221,6 @@
 	&lt;/define&gt;
 
 	&lt;!-- Wooden --&gt;
-
 	&lt;define id=&quot;wood_armor&quot;&gt;
 		&lt;color&gt;0x0&lt;/color&gt;
 		&lt;tag name=&quot;resname&quot; value=&quot;plainwood&quot; /&gt;

Modified: trunk/server/release/definitions/items/core.xml
===================================================================
--- trunk/server/release/definitions/items/core.xml	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/definitions/items/core.xml	2009-04-05 18:19:39 UTC (rev 6877)
@@ -12,8 +12,8 @@
 		&lt;id&gt;0x14f0&lt;/id&gt;
 		&lt;basescripts&gt;check&lt;/basescripts&gt;
 		&lt;color&gt;0x34&lt;/color&gt;
-		&lt;name&gt;a bank check&lt;/name&gt;
-		&lt;weight&gt;0.1&lt;/weight&gt;
+		&lt;name&gt;#1041361&lt;/name&gt;
+		&lt;weight&gt;1.0&lt;/weight&gt;
 		&lt;newbie/&gt;
 	&lt;/item&gt;
 	&lt;item id=&quot;ITEM_NO_DECAY&quot;&gt;

Modified: trunk/server/release/definitions/scripts.xml
===================================================================
--- trunk/server/release/definitions/scripts.xml	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/definitions/scripts.xml	2009-04-05 18:19:39 UTC (rev 6877)
@@ -153,6 +153,7 @@
 	&lt;script&gt;commands.export&lt;/script&gt;
 	&lt;script&gt;commands.exportmissingids&lt;/script&gt;
 	&lt;script&gt;commands.exportstatics&lt;/script&gt;
+	&lt;script&gt;commands.find&lt;/script&gt;
 	&lt;script&gt;commands.findlock&lt;/script&gt;
 	&lt;script&gt;commands.fix&lt;/script&gt;
 	&lt;script&gt;commands.follow&lt;/script&gt;

Modified: trunk/server/release/scripts/beverage.py
===================================================================
--- trunk/server/release/scripts/beverage.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/beverage.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -105,7 +105,7 @@
 		quantity = int(item.gettag('quantity'))
 
 	if quantity == 0:
-		if CONTAINERS.has_key(item.id):
+		if item.id in CONTAINERS:
 			cprops = CONTAINERS[item.id]
 
 			if cprops[3]:
@@ -133,7 +133,7 @@
 		quantity = int(item.gettag('quantity'))
 	cprops = CONTAINERS[item.id]
 	if quantity == 0:
-		if CONTAINERS.has_key(item.id):
+		if item.id in CONTAINERS:
 			cprops = CONTAINERS[item.id]
 
 			if cprops[3]:
@@ -178,7 +178,7 @@
 # Find a valid container item id for the given fluid
 # 
 def updateItemIdFromFluid(item, fluid):
-	if not FLUIDS.has_key(fluid):
+	if not fluid in FLUIDS:
 		return
 
 	origid = item.id
@@ -201,7 +201,7 @@
 	if not item:
 		return
 
-	if not CONTAINERS.has_key(item.id):
+	if not item.id in CONTAINERS:
 		return
 
 	cprops = CONTAINERS[item.id]
@@ -226,7 +226,7 @@
 	if target.item == item:
 		return False
 
-	if CONTAINERS.has_key(target.item.id):
+	if target.item.id in CONTAINERS:
 		quantity = 0
 		if target.item.hastag('quantity'):
 			quantity = int(target.item.gettag('quantity'))
@@ -235,7 +235,7 @@
 		if target.item.hastag('fluid'):
 			fluid = str(target.item.gettag('fluid'))
 
-		if quantity &gt; 0 and FLUIDS.has_key(fluid):
+		if quantity &gt; 0 and fluid in FLUIDS:
 
 			# completely refill the empty pitcher
 			if not item.hastag('quantity'):	
@@ -355,10 +355,10 @@
 	if item.hastag('fluid'):
 		btype = unicode(item.gettag('fluid'))
 
-	if not FLUIDS.has_key(btype):
+	if not btype in FLUIDS:
 		return True
 
-	if not CONTAINERS.has_key(item.id):
+	if not item.id in CONTAINERS:
 		return False
 
 	cprops = CONTAINERS[item.id]
@@ -386,11 +386,11 @@
 	if item.hastag('fluid'):
 		btype = unicode(item.gettag('fluid'))
 
-	if not FLUIDS.has_key(btype):
+	if not btype in FLUIDS:
 		char.socket.sysmessage( tr(&quot;You shouldn't drink this strange fluid.&quot;) )
 		return True
 
-	if not CONTAINERS.has_key(item.id):
+	if not item.id in CONTAINERS:
 		return False
 
 	cprops = CONTAINERS[item.id]
@@ -428,7 +428,7 @@
 # Show the tooltip for the item
 #
 def onShowTooltip(player, object, tooltip):
-	if not CONTAINERS.has_key(object.id):
+	if not object.id in CONTAINERS:
 		return
 
 	cprop = CONTAINERS[object.id]
@@ -437,7 +437,7 @@
 	if object.hastag('fluid'):
 		btype = unicode(object.gettag('fluid'))
 
-	if object.name == '' and FLUIDS.has_key(btype):
+	if object.name == '' and btype in FLUIDS:
 		fprop = FLUIDS[btype]
 
 		tooltip.reset()

Modified: trunk/server/release/scripts/check.py
===================================================================
--- trunk/server/release/scripts/check.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/check.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -14,11 +14,8 @@
 import wolfpack.utilities
 
 def onShowTooltip( sender, target, tooltip ):
-	tooltip.reset()
-	tooltip.add( 1041361, &quot;&quot; ) # A Bank Check
-	tooltip.add( 1038021, &quot;&quot; ) # Blessed
 	if target.hastag('value'):
-		tooltip.add( 1060738, str( target.gettag( &quot;value&quot;) ) )
+		tooltip.add( 1060738, str( target.gettag(&quot;value&quot;) ) )
 
 def onUse( char, item ):
 	if not char.canreach(item, -1):

Modified: trunk/server/release/scripts/combat/utilities.py
===================================================================
--- trunk/server/release/scripts/combat/utilities.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/combat/utilities.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -98,7 +98,7 @@
 		if bestskill and properties.fromitem(weapon, BESTSKILL):
 			return getbestskill(char)
 
-		if not WEAPON_INFORMATION.has_key(weapon.type):
+		if not weapon.type in WEAPON_INFORMATION:
 			return WRESTLING
 		else:
 			return WEAPON_INFORMATION[weapon.type][SKILL]

Modified: trunk/server/release/scripts/commands/add.py
===================================================================
--- trunk/server/release/scripts/commands/add.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/add.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -18,14 +18,14 @@
 	npc = wolfpack.addnpc(str(arguments[0]), target.pos)
 	npc.update()
 
-	player.log(LOG_MESSAGE, &quot;Adds npc %s (0x%x) at %s.\n&quot; % (str(arguments[0]), npc.serial, str(target.pos)))
+	player.log(LOG_MESSAGE, tr(&quot;Adds npc %s (0x%x) at %s.\n&quot;) % (str(arguments[0]), npc.serial, str(target.pos)))
 
 #
 # Target response for adding a multi
 #
 def addmulti(player, arguments, target):
 	if target.item and target.item.container:
-		player.socket.sysmessage(&quot;You can't add the multi there.&quot;)
+		player.socket.sysmessage(tr(&quot;You can't add the multi there.&quot;))
 		return
 
 	multi = wolfpack.addmulti(str(arguments[0]))
@@ -39,7 +39,7 @@
 	multi.moveto(target.pos)
 	multi.update()
 
-	player.log(LOG_MESSAGE, &quot;Adds multi %s (0x%x) at %s.\n&quot; % (str(arguments[0]), multi.serial, target.pos))
+	player.log(LOG_MESSAGE, tr(&quot;Adds multi %s (0x%x) at %s.\n&quot;) % (str(arguments[0]), multi.serial, target.pos))
 
 #
 # Target response for adding an item
@@ -58,39 +58,39 @@
 			target.item.additem(item, 1, 1, 0)
 
 			if arguments[1]:
-				player.log(LOG_MESSAGE, &quot;Adds static item %s (0x%x) into 0x%x.\n&quot; % (str(arguments[0]), item.serial, target.item.serial))
+				player.log(LOG_MESSAGE, tr(&quot;Adds static item %s (0x%x) into 0x%x.\n&quot;) % (str(arguments[0]), item.serial, target.item.serial))
 			else:
-				player.log(LOG_MESSAGE, &quot;Adds item %s (0x%x) into 0x%x.\n&quot; % (str(arguments[0]), item.serial, target.item.serial))
+				player.log(LOG_MESSAGE, tr(&quot;Adds item %s (0x%x) into 0x%x.\n&quot;) % (str(arguments[0]), item.serial, target.item.serial))
 		elif target.item.container:
 			if target.item.layer:
 				return False
 			target.item.container.additem(item, 1, 1, 0)
 
 			if arguments[1]:
-				player.log(LOG_MESSAGE, &quot;Adds static item %s (0x%x) into 0x%x.\n&quot; % (str(arguments[0]), item.serial, target.item.container.serial))
+				player.log(LOG_MESSAGE, tr(&quot;Adds static item %s (0x%x) into 0x%x.\n&quot;) % (str(arguments[0]), item.serial, target.item.container.serial))
 			else:
-				player.log(LOG_MESSAGE, &quot;Adds item %s (0x%x) into 0x%x.\n&quot; % (str(arguments[0]), item.serial, target.item.container.serial))
+				player.log(LOG_MESSAGE, tr(&quot;Adds item %s (0x%x) into 0x%x.\n&quot;) % (str(arguments[0]), item.serial, target.item.container.serial))
 		else:
 			item.moveto(target.item.pos)
 
 			if arguments[1]:
-				player.log(LOG_MESSAGE, &quot;Adds static item %s (0x%x) at %s.\n&quot; % (str(arguments[0]), item.serial, str(target.item.pos)))
+				player.log(LOG_MESSAGE, tr(&quot;Adds static item %s (0x%x) at %s.\n&quot;) % (str(arguments[0]), item.serial, str(target.item.pos)))
 			else:
-				player.log(LOG_MESSAGE, &quot;Adds item %s (0x%x) at %s.\n&quot; % (str(arguments[0]), item.serial, str(target.item.pos)))			
+				player.log(LOG_MESSAGE, tr(&quot;Adds item %s (0x%x) at %s.\n&quot;) % (str(arguments[0]), item.serial, str(target.item.pos)))
 	elif target.char:
 		item.moveto(target.char.pos)
 
 		if arguments[1]:
-			player.log(LOG_MESSAGE, &quot;Adds static item %s (0x%x) at %s.\n&quot; % (str(arguments[0]), item.serial, str(target.char.pos)))
+			player.log(LOG_MESSAGE, tr(&quot;Adds static item %s (0x%x) at %s.\n&quot;) % (str(arguments[0]), item.serial, str(target.char.pos)))
 		else:
-			player.log(LOG_MESSAGE, &quot;Adds item %s (0x%x) at %s.\n&quot; % (str(arguments[0]), item.serial, str(target.char.pos)))
+			player.log(LOG_MESSAGE, tr(&quot;Adds item %s (0x%x) at %s.\n&quot;) % (str(arguments[0]), item.serial, str(target.char.pos)))
 	else:
 		item.moveto(target.pos)
 
 		if arguments[1]:
-			player.log(LOG_MESSAGE, &quot;Adds static item %s (0x%x) at %s.\n&quot; % (str(arguments[0]), item.serial, str(target.pos)))
+			player.log(LOG_MESSAGE, tr(&quot;Adds static item %s (0x%x) at %s.\n&quot;) % (str(arguments[0]), item.serial, str(target.pos)))
 		else:
-			player.log(LOG_MESSAGE, &quot;Adds item %s (0x%x) at %s.\n&quot; % (str(arguments[0]), item.serial, str(target.pos)))
+			player.log(LOG_MESSAGE, tr(&quot;Adds item %s (0x%x) at %s.\n&quot;) % (str(arguments[0]), item.serial, str(target.pos)))
 
 	item.update()
 
@@ -100,7 +100,7 @@
 def static(socket, command, arguments):
 	if len(arguments) &gt; 0:
 		if wolfpack.getdefinition(WPDT_ITEM, arguments):
-			socket.sysmessage(&quot;Where do you want to place the item '%s'?&quot; % arguments)
+			socket.sysmessage(tr(&quot;Where do you want to place the item '%s'?&quot;) % arguments)
 			socket.attachtarget(&quot;commands.add.additem&quot;, [arguments, True])
 		elif wolfpack.getdefinition(WPDT_MULTI, arguments):
 			node = wolfpack.getdefinition(WPDT_MULTI, arguments)
@@ -109,13 +109,12 @@
 				subnode = node.getchild(i)
 				if subnode.name == 'id': # Found the display id
 					dispid = hex2dec(subnode.value)
-			socket.sysmessage(&quot;tet&quot;)
-			socket.sysmessage(&quot;Where do you want to place the multi '%s'?&quot; % arguments)
+			socket.sysmessage(tr(&quot;Where do you want to place the multi '%s'?&quot;) % arguments)
 			socket.attachmultitarget(&quot;commands.add.addmulti&quot;,  dispid - 0x4000, [arguments, True], 0, 0, 0)
 		else:
-			socket.sysmessage('No Item, NPC or Multi definition by that name found.')
+			socket.sysmessage(tr('No Item, NPC or Multi definition by that name found.'))
 	else:
-		socket.sysmessage('Usage: static &lt;id&gt;')
+		socket.sysmessage(tr('Usage: static &lt;id&gt;'))
 
 #
 # Add an item or character or
@@ -124,10 +123,10 @@
 def add(socket, command, arguments):
 	if len(arguments) &gt; 0:
 		if wolfpack.getdefinition(WPDT_ITEM, arguments):
-			socket.sysmessage(&quot;Where do you want to place the item '%s'?&quot; % arguments)
+			socket.sysmessage(tr(&quot;Where do you want to place the item '%s'?&quot;) % arguments)
 			socket.attachtarget(&quot;commands.add.additem&quot;, [arguments, False])
 		elif wolfpack.getdefinition(WPDT_NPC, arguments):
-			socket.sysmessage(&quot;Where do you want to spawn the npc '%s'?&quot; % arguments)
+			socket.sysmessage(tr(&quot;Where do you want to spawn the npc '%s'?&quot;) % arguments)
 			socket.attachtarget(&quot;commands.add.addnpc&quot;, [arguments])
 		elif wolfpack.getdefinition(WPDT_MULTI, arguments):
 			node = wolfpack.getdefinition(WPDT_MULTI, arguments)
@@ -136,17 +135,17 @@
 				subnode = node.getchild(i)
 				if subnode.name == 'id': # Found the display id
 					dispid = hex2dec(subnode.value)
-			socket.sysmessage(&quot;Where do you want to place the multi '%s'?&quot; % arguments)
+			socket.sysmessage(tr(&quot;Where do you want to place the multi '%s'?&quot;) % arguments)
 			socket.attachmultitarget(&quot;commands.add.addmulti&quot;,  dispid - 0x4000, [arguments, False], 0, 0, 0)
 		else:
-			socket.sysmessage('No Item, NPC or Multi definition by that name found.')
+			socket.sysmessage(tr('No Item, NPC or Multi definition by that name found.'))
 		return
 
 	global generated
 	if not generated:
 		generated = True
-		socket.sysmessage('Generating add menu.')
-		socket.sysmessage('Please wait...')
+		socket.sysmessage(tr('Generating add menu.'))
+		socket.sysmessage(tr('Please wait...'))
 		generateAddMenu(socket.player.serial)
 		return
 
@@ -154,7 +153,7 @@
 	if menu:
 		menu.send(socket.player)
 	else:
-		socket.sysmessage('No ADDMENU menu found.')
+		socket.sysmessage(tr('No ADDMENU menu found.'))
 
 #
 # This action creates a npc.
@@ -169,7 +168,7 @@
 		self.skills = ''
 
 	def make(self, player, arguments, nodelay=0):
-		player.socket.sysmessage(&quot;Where do you want to spawn the npc '%s'?&quot; % self.definition)
+		player.socket.sysmessage(tr(&quot;Where do you want to spawn the npc '%s'?&quot;) % self.definition)
 		player.socket.attachtarget(&quot;commands.add.addnpc&quot;, [self.definition])
 		MakeAction.make(self, player, arguments, nodelay)
 
@@ -181,7 +180,7 @@
 		MakeItemAction.__init__(self, parent, title, itemid, definition)
 
 	def make(self, player, arguments, nodelay=0):
-		player.socket.sysmessage(&quot;Where do you want to place the item '%s'?&quot; % self.definition)
+		player.socket.sysmessage(tr(&quot;Where do you want to place the item '%s'?&quot;) % self.definition)
 		player.socket.attachtarget(&quot;commands.add.additem&quot;, [self.definition, False])
 		MakeAction.make(self, player, arguments, nodelay)
 
@@ -199,7 +198,7 @@
 			subnode = node.getchild(i)
 			if subnode.name == 'id': # Found the display id
 				dispid = hex2dec(subnode.value)
-		player.socket.sysmessage(&quot;Where do you want to place the multi '%s'?&quot; % self.definition)
+		player.socket.sysmessage(tr(&quot;Where do you want to place the multi '%s'?&quot;) % self.definition)
 		player.socket.attachmultitarget(&quot;commands.add.addmulti&quot;,  dispid - 0x4000, [self.definition, False], 0, 0, 0)
 		MakeAction.make(self, player, arguments, nodelay)
 
@@ -248,7 +247,7 @@
 					parent = None
 					if len(category) == 0:
 						parent = addmenu
-					elif submenus.has_key(category):
+					elif category in submenus:
 						parent = submenus[category]
 
 					category += subcategory + '\\'
@@ -323,7 +322,7 @@
 					parent = None
 					if len(category) == 0:
 						parent = addmenu
-					elif submenus.has_key(category):
+					elif category in submenus:
 						parent = submenus[category]
 
 					category += subcategory + '\\'
@@ -372,7 +371,7 @@
 					parent = None
 					if len(category) == 0:
 						parent = addmenu
-					elif submenus.has_key(category):
+					elif category in submenus:
 						parent = submenus[category]
 
 					category += subcategory + '\\'
@@ -425,7 +424,7 @@
         If no additional parameters are passed to the add command, it will generate a menu with all
 	categorized item and npc definitions. The entries of the menu are automatically generated
 	based on the loaded definitions &lt;pre&gt;&lt;category&gt;&lt;/pre&gt; tag.
-	The object's ids are can be found in the definitions, such as:
+	The object's ids can be found in the definitions, such as:
 	&lt;code&gt;
 		&lt;!-- Random Horse --&gt;
         	&lt;npc id=&quot;horse&quot; inherit=&quot;animal_base&quot;&gt;

Modified: trunk/server/release/scripts/commands/boom.py
===================================================================
--- trunk/server/release/scripts/commands/boom.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/boom.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -42,3 +42,9 @@
 
 def onLoad():
 	wolfpack.registercommand('boom', boom)
+
+&quot;&quot;&quot;
+	\command boom
+	\description Generates an explosion around the own character.
+	\usage - &lt;code&gt;boom&lt;/code&gt;
+&quot;&quot;&quot;

Modified: trunk/server/release/scripts/commands/decoration.py
===================================================================
--- trunk/server/release/scripts/commands/decoration.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/decoration.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -34,23 +34,24 @@
 		self.statements = []
 		self.doLink = False
 		self.linkTo = None
+
 	def startElement( self, name, atts ):
 		if name == &quot;item&quot;:
 			self.itemid = str(atts.getValue(&quot;id&quot;));
-			if atts.has_key(&quot;hue&quot;):
+			if &quot;hue&quot; in atts:
 				self.hue = int(hex2dec(str(atts.getValue(&quot;hue&quot;))));
 			else:
 				self.hue = 0
-			if atts.has_key(&quot;amount&quot;):
+			if &quot;amount&quot; in atts:
 				self.amount = int(atts.getValue(&quot;amount&quot;));
 			else:
 				self.amount = 0
 			self.statements = []
 		elif name == &quot;attribute&quot;:
 			type = &quot;str&quot;
-			if atts.has_key(&quot;type&quot;):
+			if &quot;type&quot; in atts:
 				type = str(atts.getValue(&quot;type&quot;))
-			if atts.has_key(&quot;value&quot;) and atts.has_key(&quot;key&quot;):
+			if &quot;value&quot; in atts and &quot;key&quot; in atts:
 				self.statements.append( str(atts.getValue(&quot;key&quot;)) + &quot;,&quot; + type + &quot;,&quot;+ str(atts.getValue(&quot;value&quot;)) )
 		elif name == &quot;pos&quot;:
 			if int(hex2dec( self.itemid )) &gt;= 0x4000:
@@ -101,9 +102,9 @@
 		item = it.first
 		while item:
 			if not self.filter(item):
-				if not self.maps.has_key(item.pos.map):
+				if not item.pos.map in self.maps:
 					self.maps[item.pos.map] = {}
-				if not self.maps[item.pos.map].has_key(item.id):
+				if not item.id in self.maps[item.pos.map]:
 					self.maps[item.pos.map][item.id] = []
 				self.maps[item.pos.map][item.id].append(item)
 			item = it.next
@@ -120,7 +121,7 @@
 			for id in self.maps[map]:
 				itemsbyhue = {}
 				for item in self.maps[map][id]:
-					if not itemsbyhue.has_key(item.color):
+					if not item.color in itemsbyhue:
 						itemsbyhue[item.color] = []
 					itemsbyhue[item.color].append(item)
 				tiledata = wolfpack.tiledata(id)
@@ -147,9 +148,9 @@
 		item = it.first
 		while item:
 			if not self.filter(item):
-				if not self.maps.has_key(item.pos.map):
+				if not item.pos.map in self.maps:
 					self.maps[item.pos.map] = {}
-				if not self.maps[item.pos.map].has_key(item.id):
+				if not item.id in self.maps[item.pos.map]:
 					self.maps[item.pos.map][item.id] = []
 				self.maps[item.pos.map][item.id].append(item)
 			item = it.next
@@ -166,7 +167,7 @@
 			for id in self.maps[map]:
 				itemsbyhue = {}
 				for item in self.maps[map][id]:
-					if not itemsbyhue.has_key(item.color):
+					if not item.color in itemsbyhue:
 						itemsbyhue[item.color] = []
 					itemsbyhue[item.color].append(item)
 				tiledata = wolfpack.tiledata(id)

Modified: trunk/server/release/scripts/commands/edit.py
===================================================================
--- trunk/server/release/scripts/commands/edit.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/edit.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -127,7 +127,7 @@
 			dialog.addResizeGump(64, 108 + yoffset, 9200, 405, 82)
 			dialog.addTilePic(92, 127 + yoffset, item.id)
 
-			if LAYERNAMES.has_key(item.layer):
+			if item.layer in LAYERNAMES:
 				layername = LAYERNAMES[item.layer]
 			else:
 				layername = 'Unknown'

Modified: trunk/server/release/scripts/commands/eval.py
===================================================================
--- trunk/server/release/scripts/commands/eval.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/eval.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -23,3 +23,10 @@
 
 def onLoad():
 	wolfpack.registercommand('eval', evalcommand)
+
+&quot;&quot;&quot;
+	\command eval
+	\description Executes python scriptlets.
+	\usage - &lt;code&gt;eval [code]&lt;/code&gt;
+	Code is the python code which is executed.
+&quot;&quot;&quot;
\ No newline at end of file

Modified: trunk/server/release/scripts/commands/events.py
===================================================================
--- trunk/server/release/scripts/commands/events.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/events.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -1,6 +1,7 @@
 
 import wolfpack
 from wolfpack.consts import LOG_MESSAGE, EVENT_USE
+from wolfpack import tr
 
 def addscript_response( player, arguments, target ):
 	script = arguments[0]
@@ -10,17 +11,17 @@
 		object = target.item
 	elif target.char:
 		if target.char.rank &gt; player.rank and player != target.char:
-			player.socket.sysmessage( &quot;You've burnt your fingers!&quot; )
+			player.socket.sysmessage( tr(&quot;You've burnt your fingers!&quot;) )
 			return False
 		object = target.char
 	else:
-		player.socket.sysmessage( 'You have to target a character or item.' )
+		player.socket.sysmessage( tr('You have to target a character or item.') )
 		return False
 
-	player.log( LOG_MESSAGE, &quot;Adds script '%s' to object 0x%x.\n&quot; % ( script, object.serial ) )
+	player.log( LOG_MESSAGE, tr(&quot;Adds script '%s' to object 0x%x.\n&quot; % ( script, object.serial )) )
 	object.addscript( str( script ) )
 	object.resendtooltip()
-	player.socket.sysmessage( 'You add the script to your target.' )
+	player.socket.sysmessage( tr('You add the script to your target.') )
 	return True
 
 &quot;&quot;&quot;
@@ -31,7 +32,7 @@
 &quot;&quot;&quot;
 def commandAddscript( socket, command, arguments ):
 	if len(arguments) == 0:
-		socket.sysmessage( 'Usage: addscript &lt;identifier&gt;' )
+		socket.sysmessage( tr('Usage: addscript &lt;identifier&gt;') )
 		return False
 
 	script = arguments.strip()
@@ -39,10 +40,10 @@
 	try:
 		wolfpack.hasevent( script, EVENT_USE )
 	except:
-		socket.sysmessage( 'No such script: %s.' % script )
+		socket.sysmessage( tr('No such script: %s.' % script) )
 		return False
 
-	socket.sysmessage( &quot;Please select the object you want to add the script '%s' to.&quot; % script)
+	socket.sysmessage( tr(&quot;Please select the object you want to add the script '%s' to.&quot; % script) )
 	socket.attachtarget( 'commands.events.addscript_response', [ script ] )
 
 def removescript_response( player, arguments, target ):
@@ -53,22 +54,22 @@
 		object = target.item
 	elif target.char:
 		if target.char.rank &gt; player.rank and player != target.char:
-			player.socket.sysmessage( &quot;You've burnt your fingers!&quot; )
+			player.socket.sysmessage( tr(&quot;You've burnt your fingers!&quot;) )
 			return False
 
 		object = target.char
 	else:
-		player.socket.sysmessage( 'You have to target a character or item.' )
+		player.socket.sysmessage( tr('You have to target a character or item.') )
 		return False
 
 	if object.hasscript( str( script ) ):
-		player.log( LOG_MESSAGE, &quot;Removes script '%s' from object 0x%x.\n&quot; % ( script, object.serial ) )
+		player.log( LOG_MESSAGE, tr(&quot;Removes script '%s' from object 0x%x.\n&quot; % ( script, object.serial )) )
 		object.removescript( str( script ) )
 		object.resendtooltip()
-		player.socket.sysmessage( 'You remove the script from your target.' )
+		player.socket.sysmessage( tr('You remove the script from your target.') )
 		return True
 	else:
-		player.socket.sysmessage( 'Your target does not have the given script.' )
+		player.socket.sysmessage( tr('Your target does not have the given script.') )
 		return False
 
 &quot;&quot;&quot;
@@ -79,7 +80,7 @@
 &quot;&quot;&quot;
 def commandRemovescript(socket, command, arguments):
 	if len(arguments) == 0:
-		socket.sysmessage('Usage: removescript &lt;identifier&gt;')
+		socket.sysmessage( tr('Usage: removescript &lt;identifier&gt;') )
 		return False
 
 	script = arguments.strip()
@@ -87,10 +88,10 @@
 	try:
 		wolfpack.hasevent( script, EVENT_USE )
 	except:
-		socket.sysmessage( 'No such script: %s.' % script )
+		socket.sysmessage( tr('No such script: %s.' % script) )
 		return False
 
-	socket.sysmessage( &quot;Please select the object you want to remove the script '%s' from.&quot; % script)
+	socket.sysmessage( tr(&quot;Please select the object you want to remove the script '%s' from.&quot; % script) )
 	socket.attachtarget( 'commands.events.removescript_response', [ script ] )
 	return True
 
@@ -102,19 +103,19 @@
 		object = target.item
 	elif target.char:
 		if target.char.rank &gt; player.rank and player != target.char:
-			player.socket.sysmessage( &quot;You've burnt your fingers!&quot; )
+			player.socket.sysmessage( tr(&quot;You've burnt your fingers!&quot;) )
 			return False
 
 		object = target.char
 	else:
-		player.socket.sysmessage( 'You have to target a character or item.' )
+		player.socket.sysmessage( tr('You have to target a character or item.') )
 		return False
 
 	if object.hasscript( str( script ) ):
-		player.socket.sysmessage( 'True' )
+		player.socket.sysmessage( tr('True') )
 		return True
 	else:
-		player.socket.sysmessage( 'False' )
+		player.socket.sysmessage( tr('False') )
 		return False
 
 &quot;&quot;&quot;
@@ -125,7 +126,7 @@
 &quot;&quot;&quot;
 def commandHasscript(socket, command, arguments):
 	if len(arguments) == 0:
-		socket.sysmessage('Usage: hasscript &lt;identifier&gt;')
+		socket.sysmessage( tr('Usage: hasscript &lt;identifier&gt;') )
 		return False
 	
 	script = arguments.strip()
@@ -133,10 +134,10 @@
 	try:
 		wolfpack.hasevent( script, EVENT_USE )
 	except:
-		socket.sysmessage( 'No such script: %s.' % script )
+		socket.sysmessage( tr('No such script: %s.' % script) )
 		return False
 	
-	socket.sysmessage( &quot;Please select the object you want to check for '%s'.&quot; % script)
+	socket.sysmessage( tr(&quot;Please select the object you want to check for '%s'.&quot; % script) )
 	socket.attachtarget( 'commands.events.hasscript_response', [ script ] )
 	return True
 

Added: trunk/server/release/scripts/commands/find.py
===================================================================
--- trunk/server/release/scripts/commands/find.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/find.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -0,0 +1,200 @@
+import wolfpack
+from wolfpack.consts import *
+from system.makemenus import MakeItemAction, MakeNPCAction, MakeMenu
+from wolfpack.utilities import hex2dec
+from wolfpack import tr
+from commands.add import AddItemAction, AddNpcAction, AddMultiAction
+import re
+
+def find(socket, command, arguments):
+	if (len(arguments) == 0):
+		socket.sysmessage( tr('Usage: find &lt;searchpattern&gt;') )
+		return
+
+	findsmenu = MakeMenu('FINDMENU', None, 'Find Menu')
+	submenus = {}
+
+	items = wolfpack.definitionsiterator(WPDT_ITEM)
+	item = items.first
+	while item:
+		if not item.hasattribute('id'):
+			item = items.next
+			continue
+
+		child = item.findchild('category')
+		if not child:
+			item = items.next
+			continue
+
+		categories = ['Items'] + child.text.split('\\')
+		description = categories[len(categories)-1] # Name of the action
+		categories = ['Items']
+
+		if ( re.search(arguments.lower(), description.lower()) ):
+			# Iterate through the categories and see if they're all there
+			category = ''
+			if len(categories) &gt; 0 and not submenus.has_key('\\'.join(categories) + '\\'):
+				for subcategory in categories:
+					if not submenus.has_key(category + subcategory + '\\'):
+						# Category is our parent category
+						parent = None
+						if len(category) == 0:
+							parent = findsmenu
+						elif category in submenus:
+							parent = submenus[category]
+
+						category += subcategory + '\\'
+						menu = MakeMenu('FINDMENU_' + category, parent, subcategory)
+						submenus[category] = menu
+					else:
+						category += subcategory + '\\'
+
+			child = item.findchild('id')
+			if child:
+				try:
+					id = int(child.value)
+				except:
+					id = 0
+			else:
+				id = 0
+
+			definition = item.getattribute('id')
+			additem = AddItemAction(menu, description, id, definition)
+			additem.otherhtml = 'Definition: ' + definition
+
+		item = items.next
+
+	npcs = wolfpack.definitionsiterator(WPDT_NPC)
+	submenus = {}
+
+	npc = npcs.first
+	while npc:
+		if not npc.hasattribute('id'):
+			npc = npcs.next
+			continue
+
+		child = npc.findchild('category')
+		if not child:
+			npc = npcs.next
+			continue
+
+		id = npc.findchild('id')
+		if id:
+			try:
+				if id.value.startswith('0x'):
+					id = wolfpack.bodyinfo(hex2dec(id.value))['figurine']
+				else:
+					id = wolfpack.bodyinfo(int(id.value))['figurine']
+			except:
+				id = 0
+		else:
+			id = 0
+
+		description = npc.findchild('desc')
+		if description:
+			description = description.value
+		else:
+			description = tr('No description available.')
+
+		categories = ['NPCs'] + child.text.split('\\')
+		title = categories[len(categories)-1] # Name of the action
+		categories = ['NPCs']
+			
+		if ( re.search(arguments.lower(), title.lower()) ):
+
+			# Iterate trough the categories and see if they're all there
+			category = ''
+			if len(categories) &gt; 0 and not submenus.has_key('\\'.join(categories) + '\\'):
+				for subcategory in categories:
+					if not submenus.has_key(category + subcategory + '\\'):
+						# Category is our parent category
+						parent = None
+						if len(category) == 0:
+							parent = findsmenu
+						elif category in submenus:
+							parent = submenus[category]
+
+						category += subcategory + '\\'
+						menu = MakeMenu('FINDMENU_' + category, parent, subcategory)
+						submenus[category] = menu
+					else:
+						category += subcategory + '\\'
+
+			definition = npc.getattribute('id')
+
+			# Parse the position of this makemenu entry
+			if len(categories) == 0:
+				addnpc = AddNpcAction(menu, title , definition, definition)
+			else:
+				addnpc = AddNpcAction(submenus['\\'.join(categories) + '\\'], title, id, definition)
+			addnpc.otherhtml = str(description)
+		npc = npcs.next
+		
+		
+	multis = wolfpack.definitionsiterator(WPDT_MULTI)
+	submenus = {}
+		
+	multi = multis.first
+	while multi:
+		if not multi.hasattribute('id'):
+			multi = multi.next
+			continue
+
+		child = multi.findchild('category')
+		if not child:
+			multi = multis.next
+			continue
+
+		categories = ['Multis'] + child.text.split('\\')
+		description = categories[len(categories)-1] # Name of the action
+		categories = ['Multis']
+
+		if ( re.search(arguments.lower(), description.lower()) ):
+			# Iterate trough the categories and see if they're all there
+			category = ''
+			if len(categories) &gt; 0 and not submenus.has_key('\\'.join(categories) + '\\'):
+				for subcategory in categories:
+					if not submenus.has_key(category + subcategory + '\\'):
+						# Category is our parent category
+						parent = None
+						if len(category) == 0:
+							parent = findsmenu
+						elif category in submenus:
+							parent = submenus[category]
+
+						category += subcategory + '\\'
+						menu = MakeMenu('FINDMENU_' + category, parent, subcategory)
+						submenus[category] = menu
+					else:
+						category += subcategory + '\\'
+
+			child = multi.findchild('id')
+			if child:
+				try:
+					id = int(child.value)
+				except:
+					id = 0
+			else:
+				id = 0
+			multi = multi.getattribute('id')
+			# Parse the position of this makemenu entry
+			if len(categories) == 0:
+				addmulti = AddMultiAction(addmenu, description, id, multi)
+			else:
+				addmulti = AddMultiAction(submenus['\\'.join(categories) + '\\'], description, id, multi)
+			addmulti.otherhtml = 'Definition: ' + multi
+		multi = multis.next
+
+	if ( len(findsmenu.submenus) &gt; 0 ):
+		findsmenu.send( socket )
+	else:
+		socket.sysmessage( tr('Could not find any item, npc or multi matching the arguments.') )
+
+def onLoad():
+	wolfpack.registercommand('find', find)
+
+&quot;&quot;&quot;
+	\command find
+	\description Use this command to find a item, npc or multi.
+	\usage - &lt;code&gt;find &lt;searchpattern&gt;&lt;/code&gt;
+&quot;&quot;&quot;
\ No newline at end of file

Modified: trunk/server/release/scripts/commands/findlock.py
===================================================================
--- trunk/server/release/scripts/commands/findlock.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/findlock.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -1,4 +1,5 @@
 import wolfpack
+from wolfpack import tr
 
 &quot;&quot;&quot;
 	\command findlock
@@ -9,7 +10,7 @@
 
 def findlock(socket, command, arguments):
 	if len(arguments) == 0:
-		socket.sysmessage('Usage: findlock &lt;lock&gt;')
+		socket.sysmessage( tr('Usage: findlock &lt;lock&gt;') )
 		return
 
 	lock = arguments.strip().lower()
@@ -24,7 +25,7 @@
 				if container.container:
 					container = container.container
 
-				socket.sysmessage(&quot;Going to item '%s' [Serial: 0x%x; Top: 0x%x].&quot; % (item.getname(), item.serial, container.serial))
+				socket.sysmessage( tr(&quot;Going to item '%s' [Serial: 0x%x; Top: 0x%x].&quot; % (item.getname(), item.serial, container.serial)) )
 				pos = container.pos
 				socket.player.removefromview()
 				socket.player.moveto(pos)

Modified: trunk/server/release/scripts/commands/go.py
===================================================================
--- trunk/server/release/scripts/commands/go.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/go.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -250,7 +250,7 @@
 					parent = None
 					if len(category) == 0:
 						parent = gomenu
-					elif submenus.has_key(category):
+					elif category in submenus:
 						parent = submenus[category]
 
 					category += subcategory + '\\'

Modified: trunk/server/release/scripts/commands/import.py
===================================================================
--- trunk/server/release/scripts/commands/import.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/import.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -204,12 +204,12 @@
 			(key, value) = line.split('=', 1)
 			props[key.lower()] = value
 		elif itemid != -1 and len(line) == 0:
-			if props.has_key('p'):
+			if 'p' in props:
 				(x, y, z) = props['p'].split(',')
 				x = int(x)
 				y = int(y)
 				z = int(z)
-				if props.has_key('color'):
+				if 'color' in props:
 			 		color = int(props['color'], 16)
 			 	else:
 			 		color = 0
@@ -254,12 +254,12 @@
 			(key, value) = line.split('=', 1)
 			props[key.lower()] = value
 		elif itemid != -1 and len(line) == 0:
-			if props.has_key('p'):
+			if 'p' in props:
 				(x, y, z) = props['p'].split(',')
 				x = int(x)
 				y = int(y)
 				z = int(z)
-				if props.has_key('color'):
+				if 'color' in props:
 			 		color = int(props['color'], 16)
 			 	else:
 			 		color = 0
@@ -323,56 +323,56 @@
 
 			# Check if we can import this item
 			serial = 'Unset'
-			if item.has_key( 'SERIAL' ):
+			if 'SERIAL' in item:
 				serial = hex( int( item[ 'SERIAL' ] ) )
 
-			if item.has_key( 'BASEID' ):
+			if 'BASEID' in item:
 				baseid = item[ 'BASEID' ]
 			else:
 				baseid = ''
 
-			if not item.has_key( 'ID' ):
+			if not 'ID' in item:
 				warnings += 'Item (%s) has no ID property. Skipping.&lt;br&gt;' % ( serial )
 				continue
 
 			id = int( item['ID'] )
 
-			if not item.has_key( 'X' ) or not item.has_key( 'Y' ):
+			if not 'X' in item or not 'Y' in item:
 				warnings += 'Item (Serial: %s, ID: %x) has no X or Y property. Skipping.&lt;br&gt;' % ( serial, id )
 				continue
 
-			if item.has_key('X'):
+			if 'X' in item:
 				x = int( item['X'] )
 			else:
 				x = 0
-			if item.has_key('Y'):
+			if 'Y' in item:
 				y = int( item['Y'] )
 			else:
 				y = 0
-			if item.has_key('Z'):
+			if 'Z' in item:
 				z = int( item['Z'] )
 			else:
 				z = 0
-			if item.has_key('MAP'):
+			if 'MAP' in item:
 				map = int( item['MAP'] )
 
 			color = 0
-			if item.has_key( 'COLOR' ):
+			if 'COLOR' in item:
 				color = int( item[ 'COLOR' ] )
 
-			if item.has_key( 'CONT' ) and item[ 'CONT' ] != '-1':
+			if 'CONT' in item and item[ 'CONT' ] != '-1':
 				# warnings += 'Item (Serial: %s, ID: %x) is contained in container %s. Skipping' % ( serial, id, item[ 'CONT' ] )
 				continue
 
 			amount = 1
-			if item.has_key( 'AMOUNT' ):
+			if 'AMOUNT' in item:
 				amount = int( item[ 'AMOUNT' ] )
 
 			name = '#'
-			if item.has_key( 'NAME' ):
+			if 'NAME' in item:
 				name = item[ 'NAME' ]
 
-			if item.has_key( 'TYPE' ):
+			if 'TYPE' in item:
 				type = item[ 'TYPE' ]
 
 			#print 'Item %x, Color %x, Pos %i,%i,%i&lt;br&gt;' % ( id, color, x, y, z )

Modified: trunk/server/release/scripts/commands/tags.py
===================================================================
--- trunk/server/release/scripts/commands/tags.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/commands/tags.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -51,7 +51,7 @@
 			object.resendtooltip()
 			continue
 
-		if response.text.has_key(i * 2 + 0) and response.text.has_key(i * 2 + 1):
+		if (i * 2, i * 2 + 1) in response.text:
 			# Get value and name of the tag
 			name = response.text[i * 2]
 			value = response.text[i * 2 + 1]

Modified: trunk/server/release/scripts/cooking.py
===================================================================
--- trunk/server/release/scripts/cooking.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/cooking.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -55,7 +55,7 @@
 		char.socket.clilocmessage( 0x7A258 ) # That doesnt belong to you
 		return 1
 
-	if ids.has_key( item.id ):
+	if item.id in ids:
 		char.socket.clilocmessage( 0x7A1FE ) # What should i cook this on
 		char.socket.attachtarget( &quot;cooking.response&quot;, [ item.serial ] )
 		return 1

Modified: trunk/server/release/scripts/deeds/carpentry_deed.py
===================================================================
--- trunk/server/release/scripts/deeds/carpentry_deed.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/deeds/carpentry_deed.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -69,7 +69,7 @@
 	if not target.hastag( 'carpentry_type' ):
 		return
 	name = target.gettag( 'carpentry_type' )
-	if not deeds.has_key( name ):
+	if not name in deeds:
 		return
 	tooltip_id = deeds[ name ][ TOOLTIP ]
 	tooltip.add( tooltip_id, &quot;&quot; )
@@ -141,7 +141,7 @@
 	if not item.hastag( 'carpentry_type' ):
 		return False
 	name = item.gettag( 'carpentry_type' )
-	if not deeds.has_key( name ):
+	if not name in deeds:
 		return False
 	dir = deeds[ name ][ DIRECTION ]
 	items = deeds[ name ][ DEED_ITEMS ]
@@ -202,7 +202,7 @@
 	if not item.hastag( 'carpentry_type' ):
 		return
 	name = item.gettag( 'carpentry_type' )
-	if not deeds.has_key( name ):
+	if not name in deeds:
 		return
 	dir = deeds[ name ][ DIRECTION ]
 	items = deeds[ name ][ DEED_ITEMS ]

Modified: trunk/server/release/scripts/environment.py
===================================================================
--- trunk/server/release/scripts/environment.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/environment.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -222,7 +222,7 @@
 		}
 
 def onUse( char, item ):
-	if not actions.has_key( item.id ):
+	if not item.id in actions:
 		return 0
 
 	return actions[ item.id ]( char, item )

Modified: trunk/server/release/scripts/equipment.py
===================================================================
--- trunk/server/release/scripts/equipment.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/equipment.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -2,8 +2,8 @@
 import wolfpack.time
 from wolfpack.utilities import *
 from wolfpack.consts import *
-import wolfpack.weaponinfo
-import wolfpack.armorinfo
+from wolfpack.weaponinfo import WEAPON_RESNAME_BONI
+from wolfpack.armorinfo import ARMOR_RESNAME_BONI
 from wolfpack import properties, tr
 from combat.utilities import weaponskill
 from math import ceil
@@ -138,45 +138,45 @@
 		prefix1 = None
 		if object.hastag('resname'):
 			resname = str(object.gettag('resname'))
-			if (armor or shield or footwear) and wolfpack.armorinfo.ARMOR_RESNAME_BONI.has_key(resname):
-				resinfo = wolfpack.armorinfo.ARMOR_RESNAME_BONI[resname]
-				if resinfo.has_key(MATERIALPREFIX):
+			if (armor or shield or footwear) and resname in ARMOR_RESNAME_BONI:
+				resinfo = ARMOR_RESNAME_BONI[resname]
+				if MATERIALPREFIX in resinfo:
 					prefix1 = resinfo[MATERIALPREFIX]
-			if weapon and wolfpack.weaponinfo.WEAPON_RESNAME_BONI.has_key(resname):
-				resinfo = wolfpack.weaponinfo.WEAPON_RESNAME_BONI[resname]
-				if resinfo.has_key(MATERIALPREFIX):
+			if weapon and resname in WEAPON_RESNAME_BONI:
+				resinfo = WEAPON_RESNAME_BONI[resname]
+				if MATERIALPREFIX in resinfo:
 					prefix1 = resinfo[MATERIALPREFIX]
 		elif object.hasstrproperty( 'resname' ):
 			resname = str( object.getstrproperty( 'resname' ) )
-			if (armor or shield or footwear) and wolfpack.armorinfo.ARMOR_RESNAME_BONI.has_key(resname):
-				resinfo = wolfpack.armorinfo.ARMOR_RESNAME_BONI[resname]
-				if resinfo.has_key(MATERIALPREFIX):
+			if (armor or shield or footwear) and resname in ARMOR_RESNAME_BONI:
+				resinfo = ARMOR_RESNAME_BONI[resname]
+				if MATERIALPREFIX in resinfo:
 					prefix1 = resinfo[MATERIALPREFIX]
-			if weapon and wolfpack.weaponinfo.WEAPON_RESNAME_BONI.has_key(resname):
-				resinfo = wolfpack.weaponinfo.WEAPON_RESNAME_BONI[resname]
-				if resinfo.has_key(MATERIALPREFIX):
+			if weapon and resname in WEAPON_RESNAME_BONI:
+				resinfo = WEAPON_RESNAME_BONI[resname]
+				if MATERIALPREFIX in resinfo:
 					prefix1 = resinfo[MATERIALPREFIX]
 
 		prefix2 = None
 		if object.hastag('resname2'):
 			resname2 = str(object.gettag('resname2'))
-			if (armor or shield or footwear) and wolfpack.armorinfo.ARMOR_RESNAME_BONI.has_key(resname2):
-				resinfo = wolfpack.armorinfo.ARMOR_RESNAME_BONI[resname2]
-				if resinfo.has_key(MATERIALPREFIX):
+			if (armor or shield or footwear) and resname2 in ARMOR_RESNAME_BONI:
+				resinfo = ARMOR_RESNAME_BONI[resname2]
+				if MATERIALPREFIX in resinfo:
 					prefix2 = resinfo[MATERIALPREFIX]
-			if weapon and wolfpack.weaponinfo.WEAPON_RESNAME_BONI.has_key(resname2):
-				resinfo = wolfpack.weaponinfo.WEAPON_RESNAME_BONI[resname2]
-				if resinfo.has_key(MATERIALPREFIX):
+			if weapon and resname2 in WEAPON_RESNAME_BONI:
+				resinfo = WEAPON_RESNAME_BONI[resname2]
+				if MATERIALPREFIX in resinfo:
 					prefix2 = resinfo[MATERIALPREFIX]
 		elif object.hasstrproperty( 'resname2' ):
 			resname2 = str( object.getstrproperty( 'resname2' ) )
-			if (armor or shield or footwear) and wolfpack.armorinfo.ARMOR_RESNAME_BONI.has_key(resname2):
-				resinfo = wolfpack.armorinfo.ARMOR_RESNAME_BONI[resname2]
-				if resinfo.has_key(MATERIALPREFIX):
+			if (armor or shield or footwear) and resname2 in ARMOR_RESNAME_BONI:
+				resinfo = ARMOR_RESNAME_BONI[resname2]
+				if MATERIALPREFIX in resinfo:
 					prefix2 = resinfo[MATERIALPREFIX]
-			if weapon and wolfpack.weaponinfo.WEAPON_RESNAME_BONI.has_key(resname2):
-				resinfo = wolfpack.weaponinfo.WEAPON_RESNAME_BONI[resname2]
-				if resinfo.has_key(MATERIALPREFIX):
+			if weapon and resname2 in WEAPON_RESNAME_BONI:
+				resinfo = WEAPON_RESNAME_BONI[resname2]
+				if MATERIALPREFIX in resinfo:
 					prefix2 = resinfo[MATERIALPREFIX]
 
 		if len(object.name) == 0:
@@ -829,7 +829,7 @@
 		player.objectdelay = 0
 		return True
 
-	if not tile.has_key('layer'):
+	if not 'layer' in tile:
 		return False
 
 	layer = tile['layer']

Modified: trunk/server/release/scripts/farming.py
===================================================================
--- trunk/server/release/scripts/farming.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/farming.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -143,7 +143,7 @@
 
 # If we double click on an item (tree e.g.)
 def onUse(player, item):
-	if not actions.has_key( item.baseid ):
+	if not item.baseid in ACTIONS:
 		return False
 	if not player.canreach(item, 2):
 		player.socket.clilocmessage(500295) # You are too far away to do that.
@@ -187,7 +187,7 @@
 	return True
 
 def onShowPaperdoll(char, player):
-	if not actions.has_key( char.baseid ):
+	if not char.baseid in ACTIONS:
 		return False
 	if not player.canreach(char, 2):
 		player.socket.clilocmessage(500295) # You are too far away to do that.
@@ -244,7 +244,7 @@
 	return True
 
 # Table of IDs mapped to handler functions
-actions = {
+ACTIONS = {
 		# Baseid: [function, max resource amount]
 		# NPCs
 		&quot;cow&quot;: [cow, 30],

Modified: trunk/server/release/scripts/furniture.py
===================================================================
--- trunk/server/release/scripts/furniture.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/furniture.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -10,29 +10,29 @@
 		prefix1 = None
 		if object.hastag('resname'):
 			resname = str(object.gettag('resname'))
-			if RESNAME_BONI.has_key(resname):
+			if resname in RESNAME_BONI:
 				resinfo = RESNAME_BONI[resname]
-				if resinfo.has_key(MATERIALPREFIX):
+				if MATERIALPREFIX in resinfo:
 					prefix1 = resinfo[MATERIALPREFIX]
 		elif object.hasstrproperty( 'resname' ):
 			resname = str( object.getstrproperty( 'resname' ) )
-			if RESNAME_BONI.has_key(resname):
+			if resname in RESNAME_BONI:
 				resinfo = RESNAME_BONI[resname]
-				if resinfo.has_key(MATERIALPREFIX):
+				if MATERIALPREFIX in resinfo:
 					prefix1 = resinfo[MATERIALPREFIX]
 
 		prefix2 = None
 		if object.hastag('resname2'):
 			resname = str(object.gettag('resname2'))
-			if RESNAME_BONI.has_key(resname):
+			if resname in RESNAME_BONI:
 				resinfo = RESNAME_BONI[resname]
-				if resinfo.has_key(MATERIALPREFIX):
+				if MATERIALPREFIX in resinfo:
 					prefix2 = resinfo[MATERIALPREFIX]
 		elif object.hasstrproperty( 'resname2' ):
 			resname = str( object.getstrproperty( 'resname2' ) )
-			if RESNAME_BONI.has_key(resname):
+			if resname in RESNAME_BONI:
 				resinfo = RESNAME_BONI[resname]
-				if resinfo.has_key(MATERIALPREFIX):
+				if MATERIALPREFIX in resinfo:
 					prefix2 = resinfo[MATERIALPREFIX]
 
 		if len(object.name) == 0:

Modified: trunk/server/release/scripts/granite.py
===================================================================
--- trunk/server/release/scripts/granite.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/granite.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -6,7 +6,7 @@
 
 	if object.hastag('resname'):
 		resname = str(object.gettag('resname'))
-		if mining.ORES.has_key(resname):
+		if resname in mining.ORES:
 			name = str(mining.ORES[resname][mining.GRANITETOOLTIP])
 
 	if name.isdigit():

Modified: trunk/server/release/scripts/guilds/stone.py
===================================================================
--- trunk/server/release/scripts/guilds/stone.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/guilds/stone.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -10,7 +10,7 @@
 # Main Menu Constants
 MAINMENU_GENERALPROPERTIES = 1
 MAINMENU_MEMBERS = 2
-MAINMENU_CANIDATES = 3
+MAINMENU_CANDIDATES = 3
 MAINMENU_DIPLOMACY = 4
 MAINMENU_MEMBERSHIP = 5
 MAINMENU_DISBANDGUILD = 6
@@ -140,33 +140,33 @@
 			# Count votes and see if someone has more than 50% of all members votes
 			# NOTE: He has to vote for himself to accept the leadership offer
 			membercount = len(guild.members)
-			canidates = {}
+			candidates = {}
 			members = guild.members
 			for member in members:
-				canidate = wolfpack.findchar(getVote(member, guild))
-				if canidate in members:
-					if canidates.has_key(canidate):
-						canidates[canidate] += 1
+				candidate = wolfpack.findchar(getVote(member, guild))
+				if candidate in members:
+					if candidate in candidates:
+						candidates[candidate] += 1
 					else:
-						canidates[canidate] = 1
+						candidates[candidate] = 1
 
-			for (canidate, votes) in canidates.items():
+			for (candidate, votes) in candidates.items():
 				if votes &gt; floor(membercount * 0.50):
 					# Member has enough votes to be a leader
 					# Check if he voted for himself
-					canidatevote = getVote(canidate, guild)
-					if canidatevote == canidate.serial:
+					candidatevote = getVote(candidate, guild)
+					if candidatevote == candidate.serial:
 						for member in guild.members:
-							if member != canidate:
-								sendMessage(member, tr('%s has been elected as the new leader of your guild.') % canidate.name)
+							if member != candidate:
+								sendMessage(member, tr('%s has been elected as the new leader of your guild.') % candidate.name)
 							else:
-								sendMessage(canidate, tr('You have been elected as the new leader of your guild.'))
-						guild.leader = canidate
-						canidate.resendtooltip()
+								sendMessage(candidate, tr('You have been elected as the new leader of your guild.'))
+						guild.leader = candidate
+						candidate.resendtooltip()
 						if guild.guildstone:
 							guild.guildstone.resendtooltip()
 					else:
-						sendMessage(canidate, tr('You have enough votes to become the new leader of your guild. To accept this result, please vote for yourself at your guildstone.'))
+						sendMessage(candidate, tr('You have enough votes to become the new leader of your guild. To accept this result, please vote for yourself at your guildstone.'))
 					break
 
 			guildMembers(player, guild)
@@ -318,11 +318,11 @@
 		color[7] = 980
 
 	dialog.addText(150, 190, tr(&quot;May edit the guild properties.&quot;), color[0])
-	dialog.addText(152, 224, tr(&quot;May recruit new canidates for the guild.&quot;), color[1])
-	dialog.addText(152, 256, tr(&quot;May promote canidates to full member status.&quot;), color[2])
+	dialog.addText(152, 224, tr(&quot;May recruit new candidates for the guild.&quot;), color[1])
+	dialog.addText(152, 256, tr(&quot;May promote candidates to full member status.&quot;), color[2])
 	dialog.addText(152, 288, tr(&quot;May act as an diplomat for this guild.&quot;), color[3])
 	dialog.addText(152, 320, tr(&quot;May kick members out of this guild.&quot;), color[4])
-	dialog.addText(152, 352, tr(&quot;May expel canidates from the guild.&quot;), color[5])
+	dialog.addText(152, 352, tr(&quot;May expel candidates from the guild.&quot;), color[5])
 	dialog.addText(152, 384, tr(&quot;May grant guild titles to members of this guild.&quot;), color[6])
 	dialog.addText(152, 416, tr(&quot;May grant permissions to other guild members.&quot;), color[7])
 
@@ -457,13 +457,13 @@
 	dialog.send(player)
 
 # Simply return to the main menu
-def guildCanidatesOverviewResponse(player, arguments, response):
+def guildCandidatesOverviewResponse(player, arguments, response):
 	guild = wolfpack.findguild(arguments[0])
 	if guild:
 		mainMenu(player, guild)
 
-# Display a read only list of canidates
-def guildCanidatesOverview(player, guild):
+# Display a read only list of candidates
+def guildCandidatesOverview(player, guild):
 	name = guild.name
 	abbreviation = ''
 	if len(guild.abbreviation) &gt; 0:
@@ -471,11 +471,11 @@
 
 	offline = []
 	online = []
-	for canidate in guild.canidates:
-		if canidate.socket:
-			online.append(canidate.name)
+	for candidate in guild.candidates:
+		if candidate.socket:
+			online.append(candidate.name)
 		else:
-			offline.append(canidate.name)
+			offline.append(candidate.name)
 
 	html = ''
 
@@ -492,7 +492,7 @@
 		html += tr('&lt;br&gt;')
 
 	if len(offline) == 0 and len(online) == 0:
-		html += tr('There are currently no known canidates for a membership in this guild.')
+		html += tr('There are currently no known candidates for a membership in this guild.')
 		html += tr('&lt;br&gt;&lt;br&gt;')
 
 	# Append a list of Members responsible for recruitment
@@ -509,11 +509,11 @@
 			html += tr('%s&lt;br&gt;') % member
 		html += tr('&lt;br&gt;&lt;br&gt;')
 	else:
-		html += tr('There is currently no one responsible for recruiting canidates.')
+		html += tr('There is currently no one responsible for recruiting candidates.')
 		html += tr('&lt;br&gt;&lt;br&gt;')
 
 	dialog = wolfpack.gumps.cGump()
-	dialog.setCallback(guildCanidatesOverviewResponse)
+	dialog.setCallback(guildCandidatesOverviewResponse)
 	dialog.setArgs([guild.serial])
 	dialog.startPage(0)
 	dialog.addResizeGump(64, 34, 9260, 464, 462)
@@ -523,11 +523,11 @@
 	dialog.addResizeGump(100, 79, 9200, 405, 65)
 	dialog.addTilePic(106, 49, 3805)
 	dialog.addText(160, 90, tr(&quot;Guildstone for %s%s&quot;) % (name, abbreviation), 380)
-	dialog.addText(160, 113, tr(&quot;Canidate Overview&quot;), 2100)
+	dialog.addText(160, 113, tr(&quot;Candidate Overview&quot;), 2100)
 	dialog.addResizeGump(100, 149, 9200, 404, 283)
 	dialog.addGump(13, 339, 10402, 0)
 	dialog.addButton(102, 450, 247, 248, 0)
-	dialog.addText(113, 158, tr(&quot;Canidates&quot;), 2100)
+	dialog.addText(113, 158, tr(&quot;Candidates&quot;), 2100)
 	dialog.addHtmlGump(110, 180, 384, 240, html, 1, 1)
 
 	dialog.send(player)
@@ -540,7 +540,7 @@
 		return
 
 	if not checkPermission(player, guild, PERMISSION_RECRUIT):
-		player.socket.sysmessage(tr('You are not allowed to recruit canidates for this guild.'))
+		player.socket.sysmessage(tr('You are not allowed to recruit candidates for this guild.'))
 	else:
 		if not target.char or not target.char.player or not target.char.socket:
 			player.socket.sysmessage(tr('You can only recruit players for your guild.'))
@@ -549,17 +549,17 @@
 				player.socket.sysmessage(tr('That character is already in a guild.'))
 			else:
 				for member in guild.members:
-					sendMessage(member, tr(&quot;A new canidate %s has been recruited into your guild by %s.&quot;) % (target.char.name, player.name))
+					sendMessage(member, tr(&quot;A new candidate %s has been recruited into your guild by %s.&quot;) % (target.char.name, player.name))
 
-				sendMessage(target.char, tr('You have been recruited as a canidate for %s by %s.') % (guild.name, player.name))
-				guild.addcanidate(target.char)
+				sendMessage(target.char, tr('You have been recruited as a candidate for %s by %s.') % (guild.name, player.name))
+				guild.addcandidate(target.char)
 				target.char.addscript( 'guilds.member' )
 				target.char.resendtooltip()
 				if guild.guildstone:
 					guild.guildstone.resendtooltip()
-				guildCanidates(player, guild)
+				guildCandidates(player, guild)
 
-def guildCanidatesResponse(player, arguments, response):
+def guildCandidatesResponse(player, arguments, response):
 	guild = wolfpack.findguild(arguments[0])
 
 	if not guild:
@@ -572,34 +572,34 @@
 		if len(response.switches) == 1:
 			switch = response.switches[0]
 
-			# Expel a canidate
+			# Expel a candidate
 			if switch &amp; 0x80000000:
 				if checkPermission(player, guild, PERMISSION_EXPEL):
 					switch &amp;= ~0x80000000
 					char = wolfpack.findchar(switch)
-					if char.player and char in guild.canidates:
-						guild.removecanidate(char)
+					if char.player and char in guild.candidates:
+						guild.removecandidate(char)
 						sendMessage(char, tr(&quot;You have been expelled from your guild by %s.&quot;) % player.name)
 						for member in guild.members:
-							sendMessage(member, tr(&quot;The canidate %s has been expelled from your guild by %s.&quot;) % (char.name, player.name))
+							sendMessage(member, tr(&quot;The candidate %s has been expelled from your guild by %s.&quot;) % (char.name, player.name))
 						char.resendtooltip()
 						if guild.guildstone:
 							guild.guildstone.resendtooltip()
 					else:
-						player.socket.sysmessage(tr('The selected player is not a canidate of this guild.'))
+						player.socket.sysmessage(tr('The selected player is not a candidate of this guild.'))
 				else:
-					player.socket.sysmessage(tr('You are not allowed to expel canidates in this guild.'))
+					player.socket.sysmessage(tr('You are not allowed to expel candidates in this guild.'))
 
-			# Promote a canidate
+			# Promote a candidate
 			elif switch &amp; 0x40000000:
 				if checkPermission(player, guild, PERMISSION_PROMOTE):
 					switch &amp;= ~0x40000000
 					char = wolfpack.findchar(switch)
-					if char.player and char in guild.canidates:
-						guild.removecanidate(char)
+					if char.player and char in guild.candidates:
+						guild.removecandidate(char)
 						sendMessage(char, tr(&quot;You have been promoted to be a full member of your guild by %s.&quot;) % player.name)
 						for member in guild.members:
-							sendMessage(member, tr(&quot;The canidate %s has been promoted to full member status by %s.&quot;) % (char.name, player.name))
+							sendMessage(member, tr(&quot;The candidate %s has been promoted to full member status by %s.&quot;) % (char.name, player.name))
 						guild.addmember(char)
 
 						# Clean voting and or permissions
@@ -612,14 +612,14 @@
 						if guild.guildstone:
 							guild.guildstone.resendtooltip()
 					else:
-						player.socket.sysmessage(tr('The selected player is not a canidate of this guild.'))
+						player.socket.sysmessage(tr('The selected player is not a candidate of this guild.'))
 				else:
-					player.socket.sysmessage(tr('You are not allowed to promote canidates in this guild.'))
+					player.socket.sysmessage(tr('You are not allowed to promote candidates in this guild.'))
 
 			# Show a target for inviting someone into the guild
 			elif switch == 1:
 				if not checkPermission(player, guild, PERMISSION_RECRUIT):
-					player.socket.sysmessage(tr('You are not allowed to recruit canidates for this guild.'))
+					player.socket.sysmessage(tr('You are not allowed to recruit candidates for this guild.'))
 				else:
 					player.socket.sysmessage('Choose the player you want to recruit for your guild.')
 					player.socket.attachtarget('guilds.stone.recruitResponse', [guild.serial])
@@ -630,9 +630,9 @@
 			mainMenu(player, guild)
 			return
 
-		guildCanidates(player, guild)
+		guildCandidates(player, guild)
 
-def guildCanidates(player, guild):
+def guildCandidates(player, guild):
 	if checkPermission(player, guild, PERMISSION_RECRUIT|PERMISSION_EXPEL|PERMISSION_PROMOTE):
 		name = guild.name
 		abbreviation = ''
@@ -640,7 +640,7 @@
 			abbreviation = tr(' [%s]') % guild.abbreviation
 
 		dialog = wolfpack.gumps.cGump()
-		dialog.setCallback(guildCanidatesResponse)
+		dialog.setCallback(guildCandidatesResponse)
 		dialog.setArgs([guild.serial])
 
 		dialog.startPage(0)
@@ -651,7 +651,7 @@
 		dialog.addResizeGump(100, 79, 9200, 405, 65)
 		dialog.addTilePic(106, 49, 3805)
 		dialog.addText(160, 90, tr(&quot;Guildstone for %s%s&quot;) % (name, abbreviation), 380)
-		dialog.addText(160, 113, tr(&quot;Canidate Management&quot;), 2100)
+		dialog.addText(160, 113, tr(&quot;Candidate Management&quot;), 2100)
 		dialog.addResizeGump(100, 149, 9200, 404, 240)
 		dialog.addGump(13, 339, 10402, 0)
 		dialog.addButton(102, 450, 247, 248, 1)
@@ -660,18 +660,18 @@
 		dialog.startGroup(0)
 
 		if checkPermission(player, guild, PERMISSION_RECRUIT):
-			dialog.addText(152, 406, tr(&quot;Recruit a new canidate for this guild.&quot;), 2100)
+			dialog.addText(152, 406, tr(&quot;Recruit a new candidate for this guild.&quot;), 2100)
 			dialog.addRadioButton(114, 401, 9721, 9724, 1, 0)
 		else:
 			dialog.addText(152, 406, tr(&quot;Recruit a new member for this guild.&quot;), 980)
 			dialog.addGump(114, 401, 9721, 980)
 
-		canidates = guild.canidates
+		candidates = guild.candidates
 		offset = 0
 		page = 0
-		pages = ceil(len(canidates) / 3.0)
+		pages = ceil(len(candidates) / 3.0)
 
-		for canidate in canidates:
+		for candidate in candidates:
 			if offset == 0:
 				page += 1
 				dialog.startPage(page)
@@ -685,20 +685,20 @@
 					dialog.addText(388, 358, tr(&quot;Next Page&quot;), 905)
 
 			dialog.addResizeGump(110, 157 + offset, 9350, 387, 62)
-			dialog.addText(118, 162 + offset, canidate.name, 2100)
+			dialog.addText(118, 162 + offset, candidate.name, 2100)
 
 			if checkPermission(player, guild, PERMISSION_EXPEL):
-				dialog.addText(151, 189 + offset, tr(&quot;Expel this canidate&quot;), 2100)
-				dialog.addRadioButton(114, 185 + offset, 9721, 9724, 0x80000000|canidate.serial, 0)
+				dialog.addText(151, 189 + offset, tr(&quot;Expel this candidate&quot;), 2100)
+				dialog.addRadioButton(114, 185 + offset, 9721, 9724, 0x80000000|candidate.serial, 0)
 			else:
-				dialog.addText(151, 189 + offset, tr(&quot;Expel this canidate&quot;), 980)
+				dialog.addText(151, 189 + offset, tr(&quot;Expel this candidate&quot;), 980)
 				dialog.addGump(114, 185 + offset, 9721, 980)
 
 			if checkPermission(player, guild, PERMISSION_PROMOTE):
-				dialog.addText(338, 189 + offset, tr(&quot;Accept this canidate&quot;), 2100)
-				dialog.addRadioButton(301, 185 + offset, 9721, 9724, 0x40000000|canidate.serial, 0)
+				dialog.addText(338, 189 + offset, tr(&quot;Accept this candidate&quot;), 2100)
+				dialog.addRadioButton(301, 185 + offset, 9721, 9724, 0x40000000|candidate.serial, 0)
 			else:
-				dialog.addText(338, 189 + offset, tr(&quot;Accept this canidate&quot;), 980)
+				dialog.addText(338, 189 + offset, tr(&quot;Accept this candidate&quot;), 980)
 				dialog.addGump(301, 185 + offset, 9721, 980)
 
 			if offset == 134:
@@ -709,7 +709,7 @@
 		dialog.send(player)
 
 	else:
-		guildCanidatesOverview(player, guild)
+		guildCandidatesOverview(player, guild)
 
 def guildDiplomacy(player, guild):
 	pass
@@ -869,7 +869,7 @@
 		player.socket.sysmessage(tr('The guild you try to manage has already been disbanded.'))
 		return
 
-	if response.button == 1 and (player in guild.members or player in guild.canidates):
+	if response.button == 1 and (player in guild.members or player in guild.candidates):
 		# Toggle Guildsign
 		if 1 in response.switches:
 			if player in guild.members:
@@ -886,8 +886,8 @@
 		# Resign from the guild
 		elif 3 in response.switches:
 			members = guild.members
-			canidates = guild.canidates
-			if player in members or player in canidates:
+			candidates = guild.candidates
+			if player in members or player in candidates:
 				guild.removemember(player)
 
 				for member in members:
@@ -952,7 +952,7 @@
 		dialog.addText(156, 172, tr(&quot;Enable your guildsign.&quot;), 980)
 		dialog.addGump(116, 168, 9721, 980)
 
-	if player in guild.members or player in guild.canidates:
+	if player in guild.members or player in guild.candidates:
 		dialog.addText(156, 212, tr(&quot;Resign from this guild.&quot;), 2100)
 		dialog.addRadioButton(116, 208, 9721, 9724, 3, 0)
 	else:
@@ -989,13 +989,13 @@
 				player.socket.sysmessage(tr('You need to be the leader of this guild or a gamemaster to disband it.'))
 			else:
 				members = guild.members
-				canidates = guild.canidates
+				candidates = guild.candidates
 
 				if guild.guildstone:
 					guild.guildstone.delete()
 				guild.delete()
 
-				for char in members + canidates:
+				for char in members + candidates:
 					sendMessage(char, tr(&quot;Your guild has been disbanded by %s!&quot;) % player.name)
 					if char.socket:
 						char.resendtooltip()
@@ -1004,9 +1004,9 @@
 		elif MAINMENU_MEMBERS in response.switches:
 			guildMembers(player, guild)
 
-		# Show a page with canidate information
-		elif MAINMENU_CANIDATES in response.switches:
-			guildCanidates(player, guild)
+		# Show a page with candidate information
+		elif MAINMENU_CANDIDATES in response.switches:
+			guildCandidates(player, guild)
 
 		# Show a page with ally/enemy information:
 		elif MAINMENU_DIPLOMACY in response.switches:
@@ -1025,7 +1025,7 @@
 		abbreviation = tr(' [%s]') % guild.abbreviation
 
 	members = guild.members
-	canidates = guild.canidates
+	candidates = guild.candidates
 
 	dialog = wolfpack.gumps.cGump()
 	dialog.setCallback(mainMenuResponse)
@@ -1062,11 +1062,11 @@
 		dialog.addRadioButton(116, 208, 9721, 9724, MAINMENU_MEMBERS, 0)
 
 	if checkPermission(player, guild, PERMISSION_RECRUIT|PERMISSION_EXPEL|PERMISSION_PROMOTE):
-		dialog.addText(156, 252, tr(&quot;Manage the canidates of this guild.&quot;), 2100)
-		dialog.addRadioButton(116, 248, 9721, 9724, MAINMENU_CANIDATES, 0)
+		dialog.addText(156, 252, tr(&quot;Manage the candidates of this guild.&quot;), 2100)
+		dialog.addRadioButton(116, 248, 9721, 9724, MAINMENU_CANDIDATES, 0)
 	else:
-		dialog.addText(156, 252, tr(&quot;View the canidates of this guild.&quot;), 2100)
-		dialog.addRadioButton(116, 248, 9721, 9724, MAINMENU_CANIDATES, 0)
+		dialog.addText(156, 252, tr(&quot;View the candidates of this guild.&quot;), 2100)
+		dialog.addRadioButton(116, 248, 9721, 9724, MAINMENU_CANDIDATES, 0)
 
 	# Diplomatic relations are not done yet
 	dialog.addText(156, 292, tr(&quot;View the diplomatic relations of this guild.&quot;), 980)
@@ -1080,7 +1080,7 @@
 	#	dialog.addRadioButton(116, 288, 9721, 9724, MAINMENU_DIPLOMACY, 0)
 
 	# You can only resign from a guild you are a member of
-	if player in members or player in canidates:
+	if player in members or player in candidates:
 		dialog.addText(156, 332, tr(&quot;Membership options.&quot;), 2100)
 		dialog.addRadioButton(116, 328, 9721, 9724, MAINMENU_MEMBERSHIP, 0)
 	else:
@@ -1130,7 +1130,7 @@
 				appendix = tr(&quot;%s [%s]&quot;) % (guild.name, guild.abbreviation)
 
 			appendix += &quot;\n&quot; + tr(&quot;Members: %u&quot;) % len(guild.members)
-			appendix += &quot;\n&quot; + tr(&quot;Canidates: %u&quot;) % len(guild.canidates)
+			appendix += &quot;\n&quot; + tr(&quot;Candidates: %u&quot;) % len(guild.candidates)
 
 			if guild.leader:
 				appendix += &quot;\n&quot; + tr(&quot;Leader: %s&quot;) % guild.leader.name

Modified: trunk/server/release/scripts/ingot.py
===================================================================
--- trunk/server/release/scripts/ingot.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/ingot.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -9,7 +9,7 @@
 
 	if object.hastag('resname'):
 		resname = str(object.gettag('resname'))
-		if mining.ORES.has_key(resname):
+		if resname in mining.ORES:
 			name = mining.ORES[resname][mining.INGOTNAME]
 
 	tooltip.reset()

Modified: trunk/server/release/scripts/lightsource.py
===================================================================
--- trunk/server/release/scripts/lightsource.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/lightsource.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -14,7 +14,7 @@
 # List of &quot;burning&quot; lightsources
 burning = [ 0x9fd, 0xa02, 0xa07, 0xa0c, 0xa0f, 0xa12, 0xa15, 0xa1a, 0xa22, 0xb1a, 0xb1d, 0xb20, 0xb22, 0xb24, 0xb26, 0x142c, 0x1430, 0x1434, 0x1854, 0x1858, 0x24bb, 0x24bd, 0x24bf, 0x24c1, 0x24c3, 0x24c5, 0x24c7, 0x24c9 ]
 
-ids = {
+IDS = {
 	# Wall Sconche
 	0x9FB : 0x9FD,
 	0x9FD : 0x9FB,
@@ -135,10 +135,9 @@
 	}
 
 def onUse( char, item ):
-	# Relatively stupid function
-	if ids.has_key( item.id ):
+	if item.id in IDS:
 		# Change the id
-		newid = ids[ item.id ]
+		newid = IDS[ item.id ]
 
 		# Item can be reached
 		if char.canreach( item, 2 ):
@@ -164,8 +163,8 @@
 	dropper = item.container
 
 	# Turn off the lightsource
-	if item.id in burning and ids.has_key( item.id ):
-		item.id = ids[item.id]
+	if item.id in burning and item.id in IDS:
+		item.id = IDS[item.id]
 		wolfpack.queuecode(update_light, (item.serial, ))
 		dropper.soundeffect(0x226)
 
@@ -175,7 +174,7 @@
 	dropper = item.container
 
 	# Turn off the lightsource
-	if item.id in burning and ids.has_key( item.id ):
+	if item.id in burning and item.id in IDS:
 		item.id = ids[ item.id ]
 		item.update()
 		dropper.soundeffect( 0x226, 0 )

Modified: trunk/server/release/scripts/magic/__init__.py
===================================================================
--- trunk/server/release/scripts/magic/__init__.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/magic/__init__.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -12,7 +12,7 @@
 def registerspell( id, spell ):
 	global spells
 
-	if spells.has_key( id ):
+	if id in spells:
 		return
 
 	spells[ id ] = spell
@@ -37,7 +37,7 @@
 
 	socket = char.socket
 
-	if not spells.has_key(spell):
+	if not spell in spells:
 		if socket:
 			socket.log(LOG_ERROR, &quot;Trying to cast unknown spell: %d.\n&quot; % spell)
 			socket.sysmessage('ERROR: Unknown Spell')

Modified: trunk/server/release/scripts/magic/vampiricembrace.py
===================================================================
--- trunk/server/release/scripts/magic/vampiricembrace.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/magic/vampiricembrace.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -10,7 +10,7 @@
 	return amount
 
 def onCastSpell(char, spell):
-	if magic.spells[spell].reagents.has_key(REAGENT_GARLIC):
+	if REAGENT_GARLIC in magic.spells[spell].reagents:
 		char.socket.clilocmessage( 1061651 ) # The garlic burns you!
 		damage = random.randint(17, 23)
 		char.damage( DAMAGE_MAGICAL, damage, char)

Modified: trunk/server/release/scripts/map.py
===================================================================
--- trunk/server/release/scripts/map.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/map.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -133,7 +133,7 @@
 def sendmap(player, item, maptype):
 	if maptype == 'preset' and item.hastag('preset'):
 		preset = item.gettag('preset')
-		if not MAP_PRESETS.has_key(preset):
+		if not preset in MAP_PRESETS:
 			player.socket.sysmessage( tr('Unknown map preset: %s.') % preset)
 			return
 		(width, height, xtop, ytop, xbottom, ybottom) = MAP_PRESETS[preset]

Modified: trunk/server/release/scripts/ore.py
===================================================================
--- trunk/server/release/scripts/ore.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/ore.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -17,7 +17,7 @@
 
 	if object.hastag('resname'):
 		resname = unicode(object.gettag('resname'))
-		if mining.ORES.has_key(resname):
+		if resname in mining.ORES:
 			name = mining.ORES[resname][mining.ORENAME]
 
 	tooltip.reset()
@@ -302,7 +302,7 @@
 	ore = args[0]
 	resname = args[1]
 
-	if not mining.ORES.has_key(resname):
+	if not resname in mining.ORES:
 		char.socket.sysmessage( tr('You cannot smelt that kind of ore.') )
 		return 0
 

Modified: trunk/server/release/scripts/signpost.py
===================================================================
--- trunk/server/release/scripts/signpost.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/signpost.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -711,6 +711,7 @@
 
 def switchgump( char, target, args ):
 	item = args[0]
+
 	gumphandler = {
 	2: gump0, #information
 	17: gump1, #security
@@ -720,20 +721,21 @@
 	4: gump10, #list co owner
 	34: gump11, #remove a co owner
 	64: gump12, #list friend
-	94: gump13}  #remove a friend
+	94: gump13 }  #remove a friend
+
 	actionhandler = {
 	7: demolish, 
 	21: customize,
 	19: addcoown,
 	49: removeallcoown,
 	79: addfriend,
-	109: removeallfriend}
+	109: removeallfriend }
 
 	button = target.button
-	if gumphandler.has_key( button ):
+	if button in gumphandler:
 		gumphandler[ button ]( char, gumpcallback, item )
 	else:
-		if actionhandler.has_key( button ):
+		if button in actionhandler:
 			actionhandler[ button ]( char, item )
 		elif button == 0:
 			return

Modified: trunk/server/release/scripts/skills/__init__.py
===================================================================
--- trunk/server/release/scripts/skills/__init__.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/__init__.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -73,13 +73,13 @@
 skills = {}
 
 def register( id, handler ):
-	if skills.has_key( id ):
+	if id in skills:
 		raise Exception, &quot;Duplicate Skill: &quot; + str( id )
 
 	skills[ id ] = handler
 
 def onSkillUse( char, skill ):
-	if skills.has_key( skill ):
+	if skill in skills:
 		skills[ skill ]( char, skill )
 		return True
 

Modified: trunk/server/release/scripts/skills/blacksmithing.py
===================================================================
--- trunk/server/release/scripts/skills/blacksmithing.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/blacksmithing.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -107,7 +107,7 @@
 	#
 	def getexceptionalchance(self, player, arguments):
 		# Only works if this item requires blacksmithing
-		if not self.skills.has_key(BLACKSMITHING):
+		if not BLACKSMITHING in self.skills:
 			return False
 
 		minskill = self.skills[BLACKSMITHING][0]

Modified: trunk/server/release/scripts/skills/bowcraft.py
===================================================================
--- trunk/server/release/scripts/skills/bowcraft.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/bowcraft.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -56,7 +56,7 @@
 	# Check if we did an exceptional job.
 	#
 	def getexceptionalchance(self, player, arguments):
-		if not self.skills.has_key(BOWCRAFT):
+		if not BOWCRAFT in self.skills:
 			return False
 
 		minskill = self.skills[BOWCRAFT][0]

Modified: trunk/server/release/scripts/skills/carpentry.py
===================================================================
--- trunk/server/release/scripts/skills/carpentry.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/carpentry.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -60,13 +60,13 @@
 	#
 	def getexceptionalchance(self, player, arguments):
 		# Only works if this item requires carpentry
-		if not self.skills.has_key(CARPENTRY):
+		if not CARPENTRY in self.skills:
 			return False
 
 		minskill = self.skills[CARPENTRY][0]
 		maxskill = self.skills[CARPENTRY][1]
 
-		if self.skills.has_key(TINKERING):
+		if TINKERING in self.skills:
 			minskill -= self.skills[TINKERING][0]
 			maxskill -= self.skills[TINKERING][1]
 

Modified: trunk/server/release/scripts/skills/cooking.py
===================================================================
--- trunk/server/release/scripts/skills/cooking.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/cooking.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -37,13 +37,13 @@
 		item.update()
 		return True
 
-	if not actions.has_key( item.baseid ):
+	if not item.baseid in ACTIONS:
 		menu = findmenu('COOKING')
 		if menu:
 			menu.send(char, [item.serial])
 		return True
 
-	char.socket.attachtarget( &quot;skills.cooking.%s&quot; % actions[ item.baseid ], [item.serial] )
+	char.socket.attachtarget( &quot;skills.cooking.%s&quot; % ACTIONS[ item.baseid ], [item.serial] )
 	return True
 
 def Dough( char, args, target ):
@@ -197,7 +197,7 @@
 	consume(item)
 
 # Table of IDs mapped to handler functions
-actions =	{
+ACTIONS =	{
 			&quot;103d&quot;: &quot;Dough&quot;,
 
 			&quot;sweet_dough&quot;: &quot;SweetDough&quot;,

Modified: trunk/server/release/scripts/skills/inscription.py
===================================================================
--- trunk/server/release/scripts/skills/inscription.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/inscription.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -298,8 +298,8 @@
 	# Check if we did an exceptional job.
 	#
 	def getexceptionalchance(self, player, arguments):
-		# Only works if this item requires blacksmithing
-		if not self.skills.has_key(INSCRIPTION):
+		# Only works if this item requires inscription
+		if not INSCRIPTION in self.skills:
 			return 0.0
 
 		minskill = self.skills[INSCRIPTION][0]

Modified: trunk/server/release/scripts/skills/mining.py
===================================================================
--- trunk/server/release/scripts/skills/mining.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/mining.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -169,7 +169,7 @@
 	gems = wolfpack.items(gem_x, gem_y, pos.map, 0)
 	for gem in gems:
 		if gem.hastag('resource') and gem.gettag('resource') == 'ore' and gem.hastag('resname') and gem.hastag('resname2'):
-			if Oretable.has_key(gem.gettag('resname')) and Oretable.has_key(gem.gettag('resname2')):
+			if (gem.gettag('resname'), gem.gettag('resname2')) in Oretable:
 				return gem
 			else:
 				gem.delete()
@@ -193,7 +193,7 @@
 	pos.y = gem_y
 	return createsandgem(pos)
 
-#Response from mining tool
+# Response from mining tool
 def response( char, args, target ):
 	socket = char.socket
 	if not socket:

Modified: trunk/server/release/scripts/skills/tailoring.py
===================================================================
--- trunk/server/release/scripts/skills/tailoring.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/tailoring.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -168,7 +168,7 @@
 	#
 	def getexceptionalchance(self, player, arguments):
 		# Only works if this item requires tailoring
-		if not self.skills.has_key(TAILORING):
+		if not TAILORING in self.skills:
 			return False
 
 		minskill = self.skills[TAILORING][0]

Modified: trunk/server/release/scripts/skills/tinkering.py
===================================================================
--- trunk/server/release/scripts/skills/tinkering.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/skills/tinkering.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -72,7 +72,7 @@
 		if not self.markable:
 			return False
 
-		if not self.skills.has_key(TINKERING):
+		if not TINKERING in self.skills:
 			return False
 
 		minskill = self.skills[TINKERING][0]

Modified: trunk/server/release/scripts/speech/monster.py
===================================================================
--- trunk/server/release/scripts/speech/monster.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/speech/monster.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -146,7 +146,7 @@
 
 	speech = char.getstrproperty('monsterspeech', '')
 	global speechbuilders
-	if not speechbuilders.has_key(speech):
+	if not speech in speechbuilders:
 		return amount
 	speechbuilder = speechbuilders[speech]
 
@@ -168,7 +168,7 @@
 
 	speech = char.getstrproperty('monsterspeech', '')
 	global speechbuilders
-	if not speechbuilders.has_key(speech):
+	if not speech in speechbuilders:
 		console.log(LOG_MESSAGE, speech + &quot;\n&quot;)
 		return False
 	speechbuilder = speechbuilders[speech]	

Modified: trunk/server/release/scripts/speech/stablemaster.py
===================================================================
--- trunk/server/release/scripts/speech/stablemaster.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/speech/stablemaster.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -240,7 +240,7 @@
 
 
 def getStableTilePic( id ):
-	if stables.has_key( id ):
+	if id in stables:
 		return stables[ id ]
 	else:
 		return False
@@ -266,15 +266,15 @@
 	if id == 0:
 		return
 
-	if not prices.has_key( id ):
+	if not id in prices:
 		vendor.say( &quot;I can't sell this!&quot;, 5 )
 		return
 
 	id_npc = idnpc[ id ]
 	id_shrink = idshrink[ id ]
 
-	if ( button == 0x0000 ):  	#shrink
-		if not shrinks.has_key( id ):
+	if ( button == 0x0000 ): # shrink
+		if not id in shrinks:
 			vendor.say( tr(&quot;That is not shrinkable...&quot;), 5 )
 			return
 		count = prices[ id ] + prices_shrinks
@@ -287,7 +287,7 @@
 			console.send( &quot;Invalid defintion: %s\n Vendor error: %s)\n&quot; % ( id_shrink, vendor) )
 			return
 		item.settag( &quot;npc_id&quot;, &quot;%s&quot; % id_npc )
-		if rideables.has_key( id ):
+		if id in rideables:
 			item.settag( &quot;npc_type&quot;, &quot;mount&quot; )
 		else:
 			item.settag( &quot;npc_type&quot;, &quot;follow&quot; )
@@ -296,8 +296,8 @@
 			item.update()
 		return
 
-	elif ( button == 0x0001 ):  	#tamed
-		if not tamed.has_key( id ):
+	elif ( button == 0x0001 ): # tamed
+		if not id in tamed:
 			vendor.say( tr(&quot;That is not tamed...&quot;), 5 )
 			return
 
@@ -315,8 +315,8 @@
 		npc.follow( char )
 		return
 
-	elif ( button == 0x0002 ):  	#rideable
-		if ( rideables.has_key( id ) != 1 ):
+	elif ( button == 0x0002 ): # rideable
+		if ( id in rideables != 1 ):
 			vendor.say( tr(&quot;That is not rideable...&quot;), 5 )
 			return
 

Modified: trunk/server/release/scripts/system/dbupdate.py
===================================================================
--- trunk/server/release/scripts/system/dbupdate.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/system/dbupdate.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -140,7 +140,7 @@
 
 	for i in range(version, current):
 		# No update for this version available
-		if not updates.has_key(i):
+		if not i in updates:
 			console.log(LOG_ERROR, &quot;No update available for database version %u.\n&quot; % i)
 			return False
 
@@ -257,7 +257,7 @@
 
 	for i in range(version, current):
 		# No update for this version available
-		if not updates.has_key(i):
+		if not i in updates:
 			console.log(LOG_ERROR, &quot;No update available for database version %u.\n&quot; % i)
 			database.close(ACCOUNTS)
 			return False

Modified: trunk/server/release/scripts/system/loot.py
===================================================================
--- trunk/server/release/scripts/system/loot.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/system/loot.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -624,7 +624,7 @@
 
 	# Create the items for each pack
 	for pack in packs:
-		if not PACKS.has_key( pack ):
+		if not pack in PACKS:
 			console.log(LOG_ERROR, &quot;Trying to create an unknown loot pack %s.\n&quot; % pack)
 			continue
 		createpack( char, killer, corpse, PACKS[ pack ] )

Modified: trunk/server/release/scripts/system/makemenus.py
===================================================================
--- trunk/server/release/scripts/system/makemenus.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/system/makemenus.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -14,7 +14,7 @@
 # Return a menu
 def findmenu(id):
 	global menus
-	if not menus.has_key(id):
+	if not id in menus:
 		return None
 	else:
 		return menus[id]
@@ -64,7 +64,7 @@
 	(menu, action) = arguments[0].split(':')
 	action = int(action)
 	global menus
-	if menus.has_key(menu):
+	if menu in menus:
 		menu = menus[menu]
 		if action &lt; len(menu.subactions):
 			menu.subactions[action].response(player, response, list(arguments)[1:])
@@ -834,7 +834,7 @@
 	arguments = list(arguments)[1:]
 
 	global menus
-	if not menus.has_key(menu):
+	if not menu in menus:
 		raise RuntimeError, &quot;Unknown makemenu: %s&quot; % menu
 	else:
 		menus[menu].response(player, response, arguments)
@@ -849,7 +849,7 @@
 	arguments = list(arguments)[2:]
 
 	global menus
-	if not menus.has_key(menu):
+	if not menu in menus:
 		raise RuntimeError, &quot;Unknown makemenu: %s.&quot; % menu
 	else:
 		if action == 1:
@@ -1005,7 +1005,7 @@
 				(menu, action) = item.split(':')
 				action = int(action)
 				global menus
-				if menus.has_key(menu):
+				if menu in menus:
 					menu = menus[menu]
 					if action &lt; len(menu.subactions):
 						gump.addButton(220, yoffset, 4005, 4007, 0x10000000 | j)
@@ -1507,7 +1507,7 @@
 			if len(history) &gt; 0:
 				(menu, action) = history[0].split(&quot;:&quot;)
 				global menus
-				if menus.has_key(menu):
+				if menu in menus:
 					menu = menus[menu]
 					action = int(action)
 					if action &lt; len(menu.subactions):
@@ -1628,7 +1628,7 @@
 					(menu, action) = history[subaction].split(':')
 					action = int(action)
 					global menus
-					if menus.has_key(menu) and action &lt; len(menus[menu].subactions):
+					if menu in menus and action &lt; len(menus[menu].subactions):
 						menus[menu].subactions[action].make(player, arguments)
 
 		# MakeHistory: Show Detail Page
@@ -1645,7 +1645,7 @@
 					(menu, action) = history[subaction].split(':')
 					action = int(action)
 					global menus
-					if menus.has_key(menu) and action &lt; len(menus[menu].subactions):
+					if menu in menus and action &lt; len(menus[menu].subactions):
 						menus[menu].subactions[action].details(player, arguments)
 
 		# MaterialSelection: Primary Material

Modified: trunk/server/release/scripts/system/poison.py
===================================================================
--- trunk/server/release/scripts/system/poison.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/system/poison.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -34,7 +34,7 @@
 			char.addscript( 'system.poison' )
 		return
 
-	if not POISONS.has_key(char.poison):
+	if not char.poison in POISONS:
 		if char.poison != -1:
 			char.poison = -1
 			char.updateflags()
@@ -104,11 +104,11 @@
 # Apply the required tags and start the timer.
 #
 def poison(char, level):
-	if not POISONS.has_key(level):
+	if not level in POISONS:
 		return False
 
 	if char.hasscript('magic.evilomen'):
-		if POISONS.has_key(level + 1): # check if it's possible to increase the poison
+		if (level+1) in POISONS: # check if it's possible to increase the poison
 			level += 1
 
 	# Level is smaller than old poison
@@ -140,7 +140,7 @@
 def onLogin(char):
 	char.removescript( 'system.poison' )
 
-	if not POISONS.has_key(char.poison):
+	if not char.poison in POISONS:
 		if char.poison != -1:
 			char.poison = -1
 			char.updateflags()

Modified: trunk/server/release/scripts/system/skillgain.py
===================================================================
--- trunk/server/release/scripts/system/skillgain.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/system/skillgain.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -164,7 +164,7 @@
 	if char.dead or char.gm or char.polymorph:
 		return
 
-	if not SKILLS.has_key(skill):
+	if not skill in SKILLS:
 		char.log(LOG_ERROR, &quot;Is using an unidentified skill: %u\n&quot; % skill)
 		return
 

Modified: trunk/server/release/scripts/system/slayer.py
===================================================================
--- trunk/server/release/scripts/system/slayer.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/system/slayer.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -108,7 +108,7 @@
 #
 def findEntry(id):
 	id = id.lower()
-	if not SLAYERS.has_key(id):
+	if not id in SLAYERS:
 		return None
 	else:
 		return SLAYERS[id]

Modified: trunk/server/release/scripts/wolfpack/properties.py
===================================================================
--- trunk/server/release/scripts/wolfpack/properties.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/scripts/wolfpack/properties.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -138,7 +138,7 @@
 	if property == MAGEARMOR and item.allowmeditation:
 		return True
 
-	if not PROPERTIES.has_key(property):
+	if not property in PROPERTIES:
 		raise Exception, &quot;Unknown property value %u&quot; % property
 
 	info = PROPERTIES[property]
@@ -161,7 +161,7 @@
 	else:
 		# Take three properties from the hardcoded property list for weapons
 		if property in [HITSOUND, MISSSOUND, SWING]:
-			if not wolfpack.weaponinfo.WEAPONINFO.has_key(item.baseid):
+			if not item.baseid in wolfpack.weaponinfo.WEAPONINFO:
 				return info[1]
 			else:
 				return wolfpack.weaponinfo.WEAPONINFO[item.baseid][property]
@@ -186,12 +186,12 @@
 
 		if resboni and item.hastag('resname'):
 			resname = unicode(item.gettag('resname'))
-			if resboni.has_key(resname) and resboni[resname].has_key(property):
+			if resname in resboni and property in resboni[resname]:
 				value += resboni[resname][property]
 
 		if resboni and item.hastag('resname2'):
 			resname = unicode(item.gettag('resname2'))
-			if resboni.has_key(resname) and resboni[resname].has_key(property):
+			if resname in resboni and property in resboni[resname]:
 				value += resboni[resname][property]
 
 		# Special Treatment for Damagetypes, if item hast 2 restypes (they are not cumulative)
@@ -203,12 +203,12 @@
 			res1name = unicode(item.gettag('resname'))
 			res2name = unicode(item.gettag('resname2'))
 			for dtype in damagetypes:
-				if resboni.has_key(res1name) and resboni[res1name].has_key(dtype):
+				if res1name in resboni and dtype in resboni[res1name]:
 					res1_has_damagetypes = True
-				if resboni.has_key(res2name) and resboni[res2name].has_key(dtype):
+				if res2name in resboni and dtype in resboni[res2name]:
 					res2_has_damagetypes = True
 			#if both resources have a own damagedistribution use the average
-			if 	res1_has_damagetypes and res2_has_damagetypes:
+			if res1_has_damagetypes and res2_has_damagetypes:
 				#the value already contains the sum of the 2, so here it must only be divided by 2
 				value = value/2
 			#if only one resource contains a damagedistribution use only this and this is already done
@@ -222,7 +222,7 @@
 # Get a property bonus from a given resource
 #
 def fromresource(resource, property, type):
-	if not PROPERTIES.has_key(property):
+	if not property in PROPERTIES:
 		raise Exception, &quot;Unknown property value %u&quot; % property
 
 	info = PROPERTIES[property]
@@ -235,13 +235,13 @@
 		return info[1]
 
 	# Default value for unknown resources
-	if not resboni.has_key(resource):
+	if not resource in resboni:
 		return info[1]
 
 	resboni = resboni[resource]
 
 	# Unkown property for this resource
-	if not resboni.has_key(property):
+	if not property in resboni:
 		return info[1]
 
 	return resboni[property]
@@ -252,7 +252,7 @@
 #
 def fromchar(char, property):
 	# Check for unknown property
-	if not PROPERTIES.has_key(property):
+	if not property in PROPERTIES:
 		raise Exception, &quot;Unknown property value %u&quot; % property
 
 	info = PROPERTIES[property]
@@ -573,7 +573,7 @@
 		property = random.choice(properties)
 		properties.remove(property)
 
-		if not PROPERTIES.has_key(property):
+		if not property in PROPERTIES:
 			continue
 
 		# Scale the value for the property
@@ -617,7 +617,7 @@
 		property = random.choice(properties)
 		properties.remove(property)
 
-		if not PROPERTIES.has_key(property):
+		if not property in PROPERTIES:
 			continue
 
 		# Scale the value for the property
@@ -702,7 +702,7 @@
 			item.settag('skillbonus_%u' % (property - 1000), '%u,%u' % (skill, value * 10))
 			continue
 
-		if not PROPERTIES.has_key(property):
+		if not property in PROPERTIES:
 			continue
 
 		# Scale the value for the property
@@ -771,7 +771,7 @@
 	for i in range(0, props):
 		property = random.choice(properties)
 
-		if not PROPERTIES.has_key(property):
+		if not property in PROPERTIES:
 			continue
 
 		# Special handling for slayers

Modified: trunk/server/release/web/accounts.py
===================================================================
--- trunk/server/release/web/accounts.py	2009-03-26 10:49:51 UTC (rev 6876)
+++ trunk/server/release/web/accounts.py	2009-04-05 18:19:39 UTC (rev 6877)
@@ -34,7 +34,7 @@
 username = session[ 'username' ]
 
 # Try to add an account
-if form.has_key( 'add' ):
+if 'add' in form:
 	name = form.getvalue( 'add', '' )
 	password1 = form.getvalue( 'password1', '' )
 	password2 = form.getvalue( 'password2', '' )
@@ -61,7 +61,7 @@
 			message = &quot;The account has been added.&quot;
 
 # Try to delete an account
-if form.has_key( 'delete' ):
+if 'delete' in form:
 	record = wolfpack.accounts.find( form.getvalue( 'delete', '' ) )
 
 	if form[ 'delete' ] == username:


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="000081.html">[Wolfpack-svn] r6878 - trunk/server/docs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#80">[ date ]</a>
              <a href="thread.html#80">[ thread ]</a>
              <a href="subject.html#80">[ subject ]</a>
              <a href="author.html#80">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/wolfpack-svn">More information about the Wolfpack-svn
mailing list</a><br>
</body></html>
